# MCP (Model Context Protocol) 완벽 가이드

> AI 모델과 외부 시스템을 연결하는 표준 프로토콜

## 개요

**MCP(Model Context Protocol)**는 Anthropic이 2024년 말 공개한 오픈 프로토콜로, AI 모델(LLM)이 외부 도구, 데이터, 서비스와 **표준화된 방식으로 통신**할 수 있게 해줍니다.

### 핵심 아이디어

```
"AI 모델을 위한 USB 포트"

┌─────────────────────────────────────────────────────────────────────┐
│                         MCP의 핵심 가치                              │
│                                                                     │
│   기존 방식:                                                         │
│   ┌─────────┐     각자 다른 방식      ┌─────────┐                   │
│   │ Claude  │ ─── 별도 구현 필요 ───▶ │  도구A  │                   │
│   │ GPT     │ ─── 또 다른 구현 ────▶ │  도구B  │                   │
│   │ Gemini  │ ─── 또 또 다른... ───▶ │  도구C  │                   │
│   └─────────┘                         └─────────┘                   │
│                                                                     │
│   MCP 방식:                                                          │
│   ┌─────────┐                         ┌─────────┐                   │
│   │ Claude  │ ──┐                     │  도구A  │                   │
│   │ GPT     │ ──┼── 표준 MCP ────────▶│  도구B  │                   │
│   │ Gemini  │ ──┘   프로토콜          │  도구C  │                   │
│   └─────────┘                         └─────────┘                   │
│                                                                     │
│   → 한 번 만들면 모든 AI에서 사용 가능!                               │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## MCP가 필요한 이유

### 기존의 문제점

```
┌─────────────────────────────────────────────────────────────────────┐
│                      기존 AI 도구 연동의 문제                         │
│                                                                     │
│   1. 파편화된 구현                                                   │
│      ─────────────────────────────────────────                      │
│      • OpenAI Function Calling 방식                                 │
│      • Anthropic Tool Use 방식                                      │
│      • LangChain Tools 방식                                         │
│      → 같은 기능을 여러 번 구현해야 함                                │
│                                                                     │
│   2. 재사용 불가                                                     │
│      ─────────────────────────────────────────                      │
│      • A 프로젝트에서 만든 도구를 B에서 못 씀                         │
│      • 매번 새로 통합 코드 작성 필요                                  │
│                                                                     │
│   3. 유지보수 부담                                                   │
│      ─────────────────────────────────────────                      │
│      • AI 모델 API 변경 시 모든 도구 수정                            │
│      • N개 모델 × M개 도구 = N×M 개의 통합 코드                      │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### MCP의 해결책

```
┌─────────────────────────────────────────────────────────────────────┐
│                        MCP가 제공하는 해결책                          │
│                                                                     │
│   ┌─────────────────────────────────────────────────────────────┐  │
│   │                    표준 프로토콜 레이어                        │  │
│   │                                                             │  │
│   │   • 일관된 통신 방식 (JSON-RPC 2.0 기반)                     │  │
│   │   • 명확한 역할 분리 (Host/Client/Server)                   │  │
│   │   • 표준화된 기능 정의 (Tools, Resources, Prompts)          │  │
│   │                                                             │  │
│   └─────────────────────────────────────────────────────────────┘  │
│                                                                     │
│   결과:                                                             │
│   • N개 모델 + M개 서버 = N + M 개의 구현만 필요                     │
│   • 한 번 만든 MCP 서버는 모든 호환 클라이언트에서 사용 가능          │
│   • 커뮤니티에서 만든 서버를 바로 활용 가능                          │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## MCP 아키텍처

### 핵심 구성 요소

```
┌─────────────────────────────────────────────────────────────────────┐
│                      MCP 아키텍처 구성 요소                           │
│                                                                     │
│   ┌─────────────────────────────────────────────────────────────┐  │
│   │                        MCP Host                              │  │
│   │            (Claude Desktop, IDE, AI 애플리케이션)             │  │
│   │                                                             │  │
│   │   • 사용자와 상호작용하는 메인 애플리케이션                     │  │
│   │   • 여러 MCP Client를 관리                                   │  │
│   │   • AI 모델의 응답을 사용자에게 전달                          │  │
│   │                                                             │  │
│   ├─────────────────────────────────────────────────────────────┤  │
│   │                        MCP Client                            │  │
│   │                  (Host 내부에서 동작)                         │  │
│   │                                                             │  │
│   │   • MCP Server와 1:1 연결 유지                               │  │
│   │   • 프로토콜 메시지 송수신 담당                               │  │
│   │   • 연결 상태 관리                                           │  │
│   │                                                             │  │
│   └─────────────────────────────────────────────────────────────┘  │
│                          │                                          │
│                          │ MCP 프로토콜 (JSON-RPC 2.0)              │
│                          │                                          │
│   ┌──────────────┐  ┌──────────────┐  ┌──────────────┐             │
│   │  MCP Server  │  │  MCP Server  │  │  MCP Server  │             │
│   │   (날씨)     │  │   (DB)       │  │  (카카오)    │             │
│   │              │  │              │  │              │             │
│   │ • Tools      │  │ • Resources  │  │ • Tools      │             │
│   │ • Resources  │  │ • Prompts    │  │ • Resources  │             │
│   │ • Prompts    │  │              │  │ • Prompts    │             │
│   └──────────────┘  └──────────────┘  └──────────────┘             │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 통신 흐름

```
┌─────────────────────────────────────────────────────────────────────┐
│                        MCP 통신 흐름 예시                            │
│                                                                     │
│   사용자: "서울 날씨 알려줘"                                          │
│                                                                     │
│   ┌────────────┐                                                    │
│   │   사용자    │                                                    │
│   └─────┬──────┘                                                    │
│         │ ① 질문 입력                                               │
│         ▼                                                           │
│   ┌────────────┐         ┌────────────┐                             │
│   │  MCP Host  │ ──────▶ │  AI 모델   │                             │
│   │  (Claude)  │ ◀────── │  (LLM)     │                             │
│   └─────┬──────┘         └────────────┘                             │
│         │ ② 도구 호출 필요 판단                                      │
│         ▼                                                           │
│   ┌────────────┐                                                    │
│   │ MCP Client │                                                    │
│   └─────┬──────┘                                                    │
│         │ ③ JSON-RPC 요청                                           │
│         ▼                                                           │
│   ┌────────────┐                                                    │
│   │ MCP Server │ ─────▶ 외부 API 호출 (날씨 API)                    │
│   │  (날씨)    │ ◀───── 결과 수신                                   │
│   └─────┬──────┘                                                    │
│         │ ④ 결과 반환                                               │
│         ▼                                                           │
│   ┌────────────┐                                                    │
│   │  AI 모델   │ ──────▶ 자연어 응답 생성                           │
│   └─────┬──────┘                                                    │
│         │ ⑤ 응답 전달                                               │
│         ▼                                                           │
│   ┌────────────┐                                                    │
│   │   사용자    │ ◀───── "서울은 현재 맑고 기온은 5°C입니다."        │
│   └────────────┘                                                    │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## MCP 서버의 3가지 핵심 기능

### 1. Tools (도구)

```
┌─────────────────────────────────────────────────────────────────────┐
│                            Tools                                     │
│                    AI가 호출할 수 있는 함수                           │
│                                                                     │
│   특징:                                                              │
│   ─────────────────────────────────────────                         │
│   • AI 모델이 "실행"할 수 있는 액션                                  │
│   • 입력 스키마(JSON Schema)로 파라미터 정의                         │
│   • 부작용을 일으킬 수 있음 (데이터 생성, 수정, 삭제)                 │
│                                                                     │
│   예시:                                                              │
│   ─────────────────────────────────────────                         │
│   • send_message(to, content) - 메시지 전송                         │
│   • create_file(path, content) - 파일 생성                          │
│   • search_web(query) - 웹 검색                                     │
│   • execute_sql(query) - SQL 실행                                   │
│                                                                     │
│   JSON-RPC 예시:                                                    │
│   ─────────────────────────────────────────                         │
│   요청:                                                             │
│   {                                                                 │
│     "jsonrpc": "2.0",                                               │
│     "method": "tools/call",                                         │
│     "params": {                                                     │
│       "name": "send_message",                                       │
│       "arguments": { "to": "user@example.com", "content": "Hi!" }   │
│     }                                                               │
│   }                                                                 │
│                                                                     │
│   응답:                                                             │
│   {                                                                 │
│     "jsonrpc": "2.0",                                               │
│     "result": {                                                     │
│       "content": [{ "type": "text", "text": "메시지 전송 완료" }]    │
│     }                                                               │
│   }                                                                 │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 2. Resources (리소스)

```
┌─────────────────────────────────────────────────────────────────────┐
│                          Resources                                   │
│                   AI가 읽을 수 있는 데이터                            │
│                                                                     │
│   특징:                                                              │
│   ─────────────────────────────────────────                         │
│   • 읽기 전용 데이터 (부작용 없음)                                   │
│   • URI로 식별 (file://, db://, api:// 등)                         │
│   • 파일, DB 레코드, API 응답 등                                    │
│   • 컨텍스트로 AI 모델에 제공                                        │
│                                                                     │
│   예시:                                                              │
│   ─────────────────────────────────────────                         │
│   • file:///path/to/document.md - 파일 내용                        │
│   • db://users/123 - 특정 사용자 정보                               │
│   • api://weather/seoul - 서울 날씨 데이터                          │
│                                                                     │
│   JSON-RPC 예시:                                                    │
│   ─────────────────────────────────────────                         │
│   요청:                                                             │
│   {                                                                 │
│     "jsonrpc": "2.0",                                               │
│     "method": "resources/read",                                     │
│     "params": { "uri": "file:///config/settings.json" }             │
│   }                                                                 │
│                                                                     │
│   응답:                                                             │
│   {                                                                 │
│     "jsonrpc": "2.0",                                               │
│     "result": {                                                     │
│       "contents": [{                                                │
│         "uri": "file:///config/settings.json",                      │
│         "mimeType": "application/json",                             │
│         "text": "{ \"theme\": \"dark\" }"                           │
│       }]                                                            │
│     }                                                               │
│   }                                                                 │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 3. Prompts (프롬프트)

```
┌─────────────────────────────────────────────────────────────────────┐
│                           Prompts                                    │
│                  재사용 가능한 프롬프트 템플릿                         │
│                                                                     │
│   특징:                                                              │
│   ─────────────────────────────────────────                         │
│   • 미리 정의된 프롬프트 템플릿                                      │
│   • 사용자가 쉽게 호출할 수 있는 작업 정의                           │
│   • 변수를 받아 동적으로 프롬프트 생성                               │
│                                                                     │
│   예시:                                                              │
│   ─────────────────────────────────────────                         │
│   • code_review(language, code) - 코드 리뷰 요청                    │
│   • summarize(document) - 문서 요약 요청                            │
│   • translate(text, target_lang) - 번역 요청                        │
│                                                                     │
│   JSON-RPC 예시:                                                    │
│   ─────────────────────────────────────────                         │
│   요청:                                                             │
│   {                                                                 │
│     "jsonrpc": "2.0",                                               │
│     "method": "prompts/get",                                        │
│     "params": {                                                     │
│       "name": "code_review",                                        │
│       "arguments": { "language": "python", "code": "def add..." }   │
│     }                                                               │
│   }                                                                 │
│                                                                     │
│   응답:                                                             │
│   {                                                                 │
│     "jsonrpc": "2.0",                                               │
│     "result": {                                                     │
│       "messages": [{                                                │
│         "role": "user",                                             │
│         "content": {                                                │
│           "type": "text",                                           │
│           "text": "다음 Python 코드를 리뷰해주세요:\n\ndef add..."   │
│         }                                                           │
│       }]                                                            │
│     }                                                               │
│   }                                                                 │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 기능 비교 요약

```
┌─────────────────────────────────────────────────────────────────────┐
│                    Tools vs Resources vs Prompts                     │
│                                                                     │
│   ┌──────────┬─────────────┬──────────────┬────────────────────┐   │
│   │   기능   │    역할      │   부작용     │       예시         │   │
│   ├──────────┼─────────────┼──────────────┼────────────────────┤   │
│   │  Tools   │ 액션 실행    │   있음       │ 메시지 전송, DB    │   │
│   │          │             │   (CUD)      │ 수정, 파일 생성    │   │
│   ├──────────┼─────────────┼──────────────┼────────────────────┤   │
│   │Resources │ 데이터 읽기  │   없음       │ 파일 읽기, API     │   │
│   │          │             │   (Read)     │ 응답, 설정 조회    │   │
│   ├──────────┼─────────────┼──────────────┼────────────────────┤   │
│   │ Prompts  │ 템플릿 제공  │   없음       │ 코드 리뷰 요청,   │   │
│   │          │             │              │ 요약 요청 템플릿   │   │
│   └──────────┴─────────────┴──────────────┴────────────────────┘   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## MCP 전송 방식 (Transports)

### 지원하는 전송 방식

```
┌─────────────────────────────────────────────────────────────────────┐
│                      MCP Transport 방식                              │
│                                                                     │
│   1. STDIO (Standard Input/Output)                                  │
│   ─────────────────────────────────────────                         │
│   • 로컬 프로세스 간 통신                                            │
│   • 가장 간단하고 안전한 방식                                        │
│   • Claude Desktop의 기본 방식                                      │
│                                                                     │
│   ┌────────────┐   stdin/stdout   ┌────────────┐                   │
│   │ MCP Client │ ◀─────────────▶ │ MCP Server │                   │
│   │  (Host)    │                  │ (Process)  │                   │
│   └────────────┘                  └────────────┘                   │
│                                                                     │
│   2. HTTP + SSE (Server-Sent Events)                               │
│   ─────────────────────────────────────────                         │
│   • 원격 서버와 통신 가능                                            │
│   • 웹 환경에서 사용                                                 │
│   • 단방향 스트리밍 지원                                             │
│                                                                     │
│   ┌────────────┐    HTTP POST     ┌────────────┐                   │
│   │ MCP Client │ ───────────────▶ │ MCP Server │                   │
│   │            │ ◀─────────────── │  (Remote)  │                   │
│   └────────────┘       SSE        └────────────┘                   │
│                                                                     │
│   3. Streamable HTTP (향후 표준)                                    │
│   ─────────────────────────────────────────                         │
│   • 양방향 스트리밍 지원                                             │
│   • 더 효율적인 통신                                                 │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## MCP 생태계

### 현재 지원하는 MCP Host

```
┌─────────────────────────────────────────────────────────────────────┐
│                       MCP 지원 클라이언트                            │
│                                                                     │
│   공식 지원:                                                         │
│   ─────────────────────────────────────────                         │
│   • Claude Desktop - Anthropic 공식 데스크톱 앱                     │
│   • Claude Code - Anthropic CLI 도구                               │
│                                                                     │
│   IDE 통합:                                                          │
│   ─────────────────────────────────────────                         │
│   • VS Code (Copilot Extension)                                     │
│   • Cursor                                                          │
│   • Windsurf                                                        │
│   • JetBrains IDEs                                                  │
│                                                                     │
│   프레임워크:                                                        │
│   ─────────────────────────────────────────                         │
│   • LangChain                                                       │
│   • Continue.dev                                                    │
│                                                                     │
│   카카오:                                                            │
│   ─────────────────────────────────────────                         │
│   • PlayMCP - 카카오 MCP 마켓플레이스                               │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 인기 MCP 서버 예시

```
┌─────────────────────────────────────────────────────────────────────┐
│                      커뮤니티 MCP 서버 예시                           │
│                                                                     │
│   파일 시스템:                                                       │
│   ─────────────────────────────────────────                         │
│   • @modelcontextprotocol/server-filesystem                        │
│     → 파일 읽기/쓰기/검색                                            │
│                                                                     │
│   데이터베이스:                                                      │
│   ─────────────────────────────────────────                         │
│   • @modelcontextprotocol/server-postgres                          │
│   • @modelcontextprotocol/server-sqlite                            │
│     → SQL 쿼리 실행, 스키마 조회                                    │
│                                                                     │
│   개발 도구:                                                         │
│   ─────────────────────────────────────────                         │
│   • @modelcontextprotocol/server-github                            │
│     → 이슈, PR, 리포지토리 관리                                      │
│                                                                     │
│   웹 서비스:                                                         │
│   ─────────────────────────────────────────                         │
│   • @modelcontextprotocol/server-brave-search                      │
│     → 웹 검색                                                        │
│   • @modelcontextprotocol/server-fetch                             │
│     → 웹페이지 내용 가져오기                                         │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## MCP vs 기존 방식 비교

### OpenAI Function Calling vs MCP

```
┌─────────────────────────────────────────────────────────────────────┐
│               OpenAI Function Calling vs MCP                         │
│                                                                     │
│   OpenAI Function Calling:                                          │
│   ─────────────────────────────────────────                         │
│   • OpenAI API 전용                                                 │
│   • 함수 정의를 API 요청에 포함                                      │
│   • 실행은 개발자가 직접 구현                                        │
│   • 모델별로 다른 구현 필요                                          │
│                                                                     │
│   // OpenAI 방식                                                    │
│   const response = await openai.chat.completions.create({           │
│     model: "gpt-4",                                                 │
│     messages: [...],                                                │
│     tools: [{                                                       │
│       type: "function",                                             │
│       function: {                                                   │
│         name: "get_weather",                                        │
│         parameters: { ... }                                         │
│       }                                                             │
│     }]                                                              │
│   });                                                               │
│   // 결과 받아서 직접 실행 후 다시 API 호출...                        │
│                                                                     │
│   MCP:                                                               │
│   ─────────────────────────────────────────                         │
│   • 모델 독립적 표준 프로토콜                                        │
│   • 서버가 도구 실행까지 담당                                        │
│   • 한 번 구현으로 모든 호환 클라이언트에서 사용                      │
│   • 프로토콜 수준의 상호운용성                                       │
│                                                                     │
│   // MCP 방식 - 서버 측에서 모든 것을 처리                           │
│   server.tool("get_weather", schema, async (args) => {              │
│     const weather = await fetchWeather(args.city);                  │
│     return { content: [{ type: "text", text: weather }] };          │
│   });                                                               │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 핵심 개념 정리

```
┌─────────────────────────────────────────────────────────────────────┐
│                       MCP 핵심 개념 요약                             │
│                                                                     │
│   ┌─────────────────────────────────────────────────────────────┐  │
│   │                                                             │  │
│   │   MCP = AI 모델과 외부 세계를 연결하는 "표준 인터페이스"       │  │
│   │                                                             │  │
│   │   • Host: AI 애플리케이션 (Claude Desktop 등)               │  │
│   │   • Client: 프로토콜 처리기 (Host 내부)                     │  │
│   │   • Server: 기능 제공자 (도구, 데이터, 프롬프트)             │  │
│   │                                                             │  │
│   │   3가지 기능:                                               │  │
│   │   • Tools - AI가 "실행"하는 함수                           │  │
│   │   • Resources - AI가 "읽는" 데이터                         │  │
│   │   • Prompts - 재사용 가능한 템플릿                          │  │
│   │                                                             │  │
│   │   전송 방식:                                                │  │
│   │   • STDIO - 로컬 프로세스 통신 (기본)                       │  │
│   │   • HTTP+SSE - 원격 서버 통신                              │  │
│   │                                                             │  │
│   └─────────────────────────────────────────────────────────────┘  │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 참고 자료

- [MCP 공식 문서](https://modelcontextprotocol.io/)
- [MCP GitHub](https://github.com/modelcontextprotocol)
- [MCP TypeScript SDK](https://github.com/modelcontextprotocol/typescript-sdk)
- [MCP Python SDK](https://github.com/modelcontextprotocol/python-sdk)
- [Anthropic MCP 발표 블로그](https://www.anthropic.com/news/model-context-protocol)

---

*마지막 업데이트: 2025-12-22*
