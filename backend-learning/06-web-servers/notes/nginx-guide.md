# Nginx ì™„ë²½ ê°€ì´ë“œ

> ê³ ì„±ëŠ¥ ì›¹ ì„œë²„, ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ, ë¡œë“œ ë°¸ëŸ°ì„œ

## ê°œìš”

**Nginx** (ì—”ì§„ì—‘ìŠ¤, "engine x")ëŠ” 2004ë…„ Igor Sysoevê°€ ê°œë°œí•œ ê³ ì„±ëŠ¥ ì›¹ ì„œë²„ì…ë‹ˆë‹¤. ì´ë²¤íŠ¸ ê¸°ë°˜ ë¹„ë™ê¸° ì•„í‚¤í…ì²˜ë¡œ ì ì€ ë¦¬ì†ŒìŠ¤ë¡œ ìˆ˜ë§Œ ê°œì˜ ë™ì‹œ ì—°ê²°ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### í•µì‹¬ ì•„ì´ë””ì–´

```
"ì ì€ ë¦¬ì†ŒìŠ¤ë¡œ ë§ì€ ì—°ê²°ì„ ë™ì‹œì— ì²˜ë¦¬í•œë‹¤"

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Nginxì˜ ì£¼ìš” ì—­í•                             â”‚
â”‚                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚   â”‚  ì›¹ ì„œë²„     â”‚   â”‚ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ â”‚   â”‚ ë¡œë“œ ë°¸ëŸ°ì„œ  â”‚             â”‚
â”‚   â”‚ (ì •ì  íŒŒì¼)  â”‚   â”‚ (ìš”ì²­ ì „ë‹¬)   â”‚   â”‚ (ë¶€í•˜ ë¶„ì‚°)  â”‚             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                     â”‚
â”‚   + SSL/TLS ì²˜ë¦¬, ìºì‹±, ì••ì¶•, Rate Limiting                         â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Nginx vs Apache

| íŠ¹ì„± | Nginx | Apache |
|------|-------|--------|
| **ì•„í‚¤í…ì²˜** | ì´ë²¤íŠ¸ ê¸°ë°˜, ë¹„ë™ê¸° | í”„ë¡œì„¸ìŠ¤/ìŠ¤ë ˆë“œ ê¸°ë°˜ |
| **ë™ì‹œ ì—°ê²°** | ìˆ˜ë§Œ ê°œ ì²˜ë¦¬ ê°€ëŠ¥ | ì—°ê²°ë‹¹ ìŠ¤ë ˆë“œ í•„ìš” |
| **ë©”ëª¨ë¦¬ ì‚¬ìš©** | ì ìŒ (ì˜ˆì¸¡ ê°€ëŠ¥) | ë§ìŒ (ì—°ê²°ì— ë¹„ë¡€) |
| **ì •ì  íŒŒì¼** | ë§¤ìš° ë¹ ë¦„ | ë¹ ë¦„ |
| **ë™ì  ì²˜ë¦¬** | ì™¸ë¶€ í”„ë¡œì„¸ì„œ í•„ìš” | ëª¨ë“ˆë¡œ ì§ì ‘ ì²˜ë¦¬ |
| **ì„¤ì •** | ë‹¨ìˆœ, ì„ ì–¸ì  | ìœ ì—°, .htaccess ì§€ì› |

```
ë™ì‹œ ì—°ê²° ì²˜ë¦¬ ë°©ì‹ ë¹„êµ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Apache (í”„ë¡œì„¸ìŠ¤/ìŠ¤ë ˆë“œ ëª¨ë¸):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì—°ê²°1 â†’ [í”„ë¡œì„¸ìŠ¤1] â”€â”€â”€ ì‘ë‹µ ëŒ€ê¸°... â”‚
â”‚  ì—°ê²°2 â†’ [í”„ë¡œì„¸ìŠ¤2] â”€â”€â”€ ì‘ë‹µ ëŒ€ê¸°... â”‚
â”‚  ì—°ê²°3 â†’ [í”„ë¡œì„¸ìŠ¤3] â”€â”€â”€ ì‘ë‹µ ëŒ€ê¸°... â”‚
â”‚  ...                                   â”‚
â”‚  ì—°ê²°N â†’ [í”„ë¡œì„¸ìŠ¤N] â”€â”€â”€ ë©”ëª¨ë¦¬ ì¦ê°€! â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Nginx (ì´ë²¤íŠ¸ ê¸°ë°˜ ëª¨ë¸):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      ë‹¨ì¼ Worker Process        â”‚  â”‚
â”‚  â”‚                                 â”‚  â”‚
â”‚  â”‚  ì—°ê²°1 â”€â”                       â”‚  â”‚
â”‚  â”‚  ì—°ê²°2 â”€â”¼â”€â–¶ ì´ë²¤íŠ¸ ë£¨í”„ â”€â–¶ ì²˜ë¦¬ â”‚  â”‚
â”‚  â”‚  ì—°ê²°3 â”€â”¤    (ë¹„ë™ê¸°)           â”‚  â”‚
â”‚  â”‚  ...   â”€â”¤                       â”‚  â”‚
â”‚  â”‚  ì—°ê²°N â”€â”˜    ë©”ëª¨ë¦¬ ì¼ì •!       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Nginx ì•„í‚¤í…ì²˜

### Master-Worker í”„ë¡œì„¸ìŠ¤ ëª¨ë¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Nginx í”„ë¡œì„¸ìŠ¤ êµ¬ì¡°                             â”‚
â”‚                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                    Master Process (root)                     â”‚  â”‚
â”‚   â”‚                                                             â”‚  â”‚
â”‚   â”‚   â€¢ ì„¤ì • íŒŒì¼ ì½ê¸° ë° ê²€ì¦                                   â”‚  â”‚
â”‚   â”‚   â€¢ í¬íŠ¸ ë°”ì¸ë”© (80, 443)                                   â”‚  â”‚
â”‚   â”‚   â€¢ Worker í”„ë¡œì„¸ìŠ¤ ìƒì„±/ê´€ë¦¬                                â”‚  â”‚
â”‚   â”‚   â€¢ ë¡œê·¸ íŒŒì¼ ê´€ë¦¬                                          â”‚  â”‚
â”‚   â”‚   â€¢ ë¬´ì¤‘ë‹¨ ì„¤ì • ë¦¬ë¡œë“œ                                       â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                          â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚          â–¼               â–¼               â–¼               â–¼         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  Worker 1  â”‚   â”‚  Worker 2  â”‚   â”‚  Worker 3  â”‚   â”‚  Worker 4  â”‚  â”‚
â”‚   â”‚  (CPU 0)   â”‚   â”‚  (CPU 1)   â”‚   â”‚  (CPU 2)   â”‚   â”‚  (CPU 3)   â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚        â”‚               â”‚               â”‚               â”‚           â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                          â”‚                                          â”‚
â”‚                     ê° Workerê°€                                     â”‚
â”‚                  ìˆ˜ì²œ ê°œ ì—°ê²° ì²˜ë¦¬                                   â”‚
â”‚                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚   â”‚   Cache Loader    â”‚   â”‚   Cache Manager   â”‚                    â”‚
â”‚   â”‚  (ì‹œì‘ ì‹œ ì‹¤í–‰)    â”‚   â”‚   (ì£¼ê¸°ì  ì‹¤í–‰)    â”‚                    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ê° í”„ë¡œì„¸ìŠ¤ ì—­í• 

| í”„ë¡œì„¸ìŠ¤ | ì—­í•  |
|----------|------|
| **Master** | ì„¤ì • ê´€ë¦¬, í¬íŠ¸ ë°”ì¸ë”©, Worker ê´€ë¦¬ (root ê¶Œí•œ) |
| **Worker** | ì‹¤ì œ ìš”ì²­ ì²˜ë¦¬, ë„¤íŠ¸ì›Œí¬ ì—°ê²° ê´€ë¦¬ (ê¶Œí•œ ì—†ìŒ) |
| **Cache Loader** | ì‹œì‘ ì‹œ ë””ìŠ¤í¬ ìºì‹œë¥¼ ë©”ëª¨ë¦¬ì— ë¡œë“œ |
| **Cache Manager** | ì£¼ê¸°ì ìœ¼ë¡œ ìºì‹œ ì •ë¦¬ ë° ë§Œë£Œ ì²˜ë¦¬ |

### ì´ë²¤íŠ¸ ê¸°ë°˜ ë¹„ë¸”ë¡œí‚¹ ì²˜ë¦¬

```
Nginx Workerì˜ ìš”ì²­ ì²˜ë¦¬ ë°©ì‹ (ì²´ìŠ¤ ë™ì‹œ ëŒ€êµ­ ë¹„ìœ )
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ê¸°ì¡´ ë°©ì‹ (ë¸”ë¡œí‚¹):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì„ ìˆ˜Aì™€ ëŒ€êµ­ ì‹œì‘                              â”‚
â”‚       â†“                                        â”‚
â”‚  ì„ ìˆ˜Aê°€ ìˆ˜ë¥¼ ë‘˜ ë•Œê¹Œì§€ ëŒ€ê¸°... (ë¸”ë¡œí‚¹)        â”‚
â”‚       â†“                                        â”‚
â”‚  ì„ ìˆ˜A ëŒ€êµ­ ì™„ë£Œ                                â”‚
â”‚       â†“                                        â”‚
â”‚  ì„ ìˆ˜Bì™€ ëŒ€êµ­ ì‹œì‘ (ì´ì œì„œì•¼!)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Nginx ë°©ì‹ (ë¹„ë¸”ë¡œí‚¹, ì´ë²¤íŠ¸ ê¸°ë°˜):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì„ ìˆ˜Aì™€ ëŒ€êµ­ â†’ ìˆ˜ë¥¼ ë‘ê³  â†’ ì¦‰ì‹œ ë‹¤ìŒìœ¼ë¡œ ì´ë™ â”‚
â”‚       â†“                                        â”‚
â”‚  ì„ ìˆ˜Bì™€ ëŒ€êµ­ â†’ ìˆ˜ë¥¼ ë‘ê³  â†’ ì¦‰ì‹œ ë‹¤ìŒìœ¼ë¡œ ì´ë™ â”‚
â”‚       â†“                                        â”‚
â”‚  ì„ ìˆ˜Cì™€ ëŒ€êµ­ â†’ ìˆ˜ë¥¼ ë‘ê³  â†’ ì¦‰ì‹œ ë‹¤ìŒìœ¼ë¡œ ì´ë™ â”‚
â”‚       â†“                                        â”‚
â”‚  ì„ ìˆ˜Aê°€ ìˆ˜ë¥¼ ë‘  â†’ ì´ë²¤íŠ¸ ë°œìƒ â†’ ì²˜ë¦¬ í›„ ì´ë™  â”‚
â”‚       â†“                                        â”‚
â”‚  ëª¨ë“  ëŒ€êµ­ì„ ë™ì‹œì— ì§„í–‰!                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```
ì´ë²¤íŠ¸ ë£¨í”„ ë™ì‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Worker Process
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚         ì´ë²¤íŠ¸ í                 â”‚    â”‚
â”‚   â”‚  [ì—°ê²°ìš”ì²­] [ë°ì´í„°ìˆ˜ì‹ ] [ì“°ê¸°ì™„ë£Œ] â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                  â”‚                         â”‚
â”‚                  â–¼                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚         ì´ë²¤íŠ¸ ë£¨í”„               â”‚    â”‚
â”‚   â”‚                                  â”‚    â”‚
â”‚   â”‚   while(true) {                  â”‚    â”‚
â”‚   â”‚       events = wait_for_events() â”‚    â”‚
â”‚   â”‚       for(event in events) {     â”‚    â”‚
â”‚   â”‚           handle(event)          â”‚    â”‚
â”‚   â”‚       }                          â”‚    â”‚
â”‚   â”‚   }                              â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                            â”‚
â”‚   * ë¸”ë¡œí‚¹ ì—†ì´ ëª¨ë“  ì´ë²¤íŠ¸ ìˆœì°¨ ì²˜ë¦¬      â”‚
â”‚   * epoll(Linux), kqueue(BSD) ì‚¬ìš©        â”‚
â”‚                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Nginx ì£¼ìš” ê¸°ëŠ¥

### 1. ì •ì  íŒŒì¼ ì„œë¹™

```nginx
server {
    listen 80;
    server_name example.com;

    # ì •ì  íŒŒì¼ ìœ„ì¹˜
    root /var/www/html;
    index index.html;

    # ì •ì  íŒŒì¼ ìºì‹±
    location ~* \.(js|css|png|jpg|jpeg|gif|ico)$ {
        expires 30d;
        add_header Cache-Control "public, immutable";
    }
}
```

### 2. ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ

```
ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ êµ¬ì¡°
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

í´ë¼ì´ì–¸íŠ¸ëŠ” Nginxë§Œ ì•Œê³ , ë°±ì—”ë“œ ì„œë²„ëŠ” ìˆ¨ê²¨ì§

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ í´ë¼ì´ì–¸íŠ¸ â”‚ â”€â”€â”€â–¶ â”‚  Nginx   â”‚ â”€â”€â”€â–¶ â”‚ ë°±ì—”ë“œ ì„œë²„   â”‚
â”‚          â”‚ â—€â”€â”€â”€ â”‚ (í”„ë¡ì‹œ)  â”‚ â—€â”€â”€â”€ â”‚ (Node, etc) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                  â€¢ SSL ì²˜ë¦¬
                  â€¢ ìºì‹±
                  â€¢ ì••ì¶•
                  â€¢ ë³´ì•ˆ
```

```nginx
server {
    listen 80;
    server_name api.example.com;

    location / {
        # Node.js ì„œë²„ë¡œ í”„ë¡ì‹œ
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;

        # WebSocket ì§€ì›
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';

        # ì›ë³¸ IP ì „ë‹¬
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
```

### 3. ë¡œë“œ ë°¸ëŸ°ì‹±

```
ë¡œë“œ ë°¸ëŸ°ì‹± êµ¬ì¡°
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    Nginx     â”‚
                    â”‚ Load Balancerâ”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Server 1  â”‚   â”‚  Server 2  â”‚   â”‚  Server 3  â”‚
    â”‚  :3001    â”‚   â”‚  :3002    â”‚   â”‚  :3003    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```nginx
# ì—…ìŠ¤íŠ¸ë¦¼ ì„œë²„ ê·¸ë£¹ ì •ì˜
upstream backend {
    # ë¡œë“œ ë°¸ëŸ°ì‹± ì•Œê³ ë¦¬ì¦˜
    # (ê¸°ë³¸ê°’: round-robin)

    server 127.0.0.1:3001 weight=3;  # ê°€ì¤‘ì¹˜ 3
    server 127.0.0.1:3002 weight=2;  # ê°€ì¤‘ì¹˜ 2
    server 127.0.0.1:3003 weight=1;  # ê°€ì¤‘ì¹˜ 1

    # í—¬ìŠ¤ ì²´í¬
    server 127.0.0.1:3004 backup;    # ë°±ì—… ì„œë²„
}

server {
    listen 80;

    location / {
        proxy_pass http://backend;
    }
}
```

**ë¡œë“œ ë°¸ëŸ°ì‹± ì•Œê³ ë¦¬ì¦˜:**

| ì•Œê³ ë¦¬ì¦˜ | ì„¤ëª… |
|----------|------|
| `round-robin` | ìˆœì°¨ì ìœ¼ë¡œ ë¶„ë°° (ê¸°ë³¸ê°’) |
| `least_conn` | ì—°ê²° ìˆ˜ê°€ ê°€ì¥ ì ì€ ì„œë²„ë¡œ |
| `ip_hash` | í´ë¼ì´ì–¸íŠ¸ IP ê¸°ë°˜ (ì„¸ì…˜ ìœ ì§€) |
| `hash` | ì»¤ìŠ¤í…€ í‚¤ ê¸°ë°˜ í•´ì‹± |

### 4. SSL/TLS ì„¤ì • (SSL ì¢…ë£Œ)

```
SSL ì¢…ë£Œ (SSL Termination) ê°œë…:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Nginxê°€ HTTPS ì•”í˜¸í™”/ë³µí˜¸í™”ë¥¼ ë‹´ë‹¹í•˜ê³ ,
ë‚´ë¶€ WASì—ëŠ” í‰ë¬¸ HTTPë¡œ ì „ë‹¬í•˜ëŠ” êµ¬ì¡°

ì™¸ë¶€ (ì¸í„°ë„·)              ë‚´ë¶€ (ì„œë²„)
     â”‚                        â”‚
â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”   HTTPS    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”   HTTP    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë¸Œë¼ìš°ì € â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚   Nginx     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚  WAS    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   ì•”í˜¸í™”    â”‚ (SSL ì¢…ë£Œ)  â”‚   í‰ë¬¸    â”‚ :3000   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ì¥ì :
â€¢ WAS ë¶€ë‹´ ê°ì†Œ (ì•”í˜¸í™”ëŠ” CPU ì§‘ì•½ì )
â€¢ ì¸ì¦ì„œë¥¼ Nginxì—ì„œë§Œ ê´€ë¦¬
â€¢ WASê°€ ì—¬ëŸ¬ ëŒ€ì—¬ë„ ì¸ì¦ì„œëŠ” í•œ ê³³ì—ì„œ
```

```nginx
server {
    listen 443 ssl http2;
    server_name api.example.com;

    # SSL ì¸ì¦ì„œ (Let's Encrypt)
    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;

    # TLS ë²„ì „ (1.2, 1.3ë§Œ í—ˆìš© - SSLì€ ì·¨ì•½í•´ì„œ ì œì™¸)
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256;
    ssl_prefer_server_ciphers off;

    # HSTS - ë¸Œë¼ìš°ì €ê°€ í•­ìƒ HTTPSë¡œ ì ‘ì†í•˜ë„ë¡ ê°•ì œ
    add_header Strict-Transport-Security "max-age=63072000" always;

    # ë°±ì—”ë“œë¡œ í”„ë¡ì‹œ (ë‚´ë¶€ë§ì´ë¼ í‰ë¬¸ HTTP)
    location / {
        proxy_pass http://localhost:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;  # WASì—ê²Œ ì›ë³¸ì´ HTTPSì„ì„ ì•Œë¦¼
    }
}

# HTTP â†’ HTTPS ë¦¬ë‹¤ì´ë ‰íŠ¸
server {
    listen 80;
    server_name api.example.com;
    return 301 https://$server_name$request_uri;
}
```

> ğŸ’¡ ìì„¸í•œ TLS í•¸ë“œì…°ì´í¬, ì¸ì¦ì„œ, ì•”í˜¸í™” ì›ë¦¬ëŠ” [HTTPS/SSL/TLS ê°€ì´ë“œ](https-ssl-tls-guide.md) ì°¸ê³ 

### 5. Gzip ì••ì¶•

```nginx
http {
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_types text/plain text/css application/json
               application/javascript text/xml application/xml;
}
```

---

## ì„¤ì • íŒŒì¼ êµ¬ì¡°

```
Nginx ì„¤ì • íŒŒì¼ ê³„ì¸µ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

/etc/nginx/
â”œâ”€â”€ nginx.conf              â† ë©”ì¸ ì„¤ì • íŒŒì¼
â”œâ”€â”€ conf.d/
â”‚   â”œâ”€â”€ default.conf        â† ê¸°ë³¸ ì„œë²„ ì„¤ì •
â”‚   â””â”€â”€ example.com.conf    â† ì‚¬ì´íŠ¸ë³„ ì„¤ì •
â”œâ”€â”€ sites-available/        â† ì‚¬ìš© ê°€ëŠ¥í•œ ì‚¬ì´íŠ¸ ì„¤ì •
â”œâ”€â”€ sites-enabled/          â† í™œì„±í™”ëœ ì‚¬ì´íŠ¸ (ì‹¬ë³¼ë¦­ ë§í¬)
â””â”€â”€ snippets/               â† ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ì¡°ê°
```

### ê¸°ë³¸ ì„¤ì • êµ¬ì¡°

```nginx
# /etc/nginx/nginx.conf

# ì „ì—­ ì„¤ì •
user nginx;
worker_processes auto;              # CPU ì½”ì–´ ìˆ˜ë§Œí¼ ìë™ ì„¤ì •
error_log /var/log/nginx/error.log;
pid /run/nginx.pid;

# ì´ë²¤íŠ¸ ì„¤ì •
events {
    worker_connections 1024;        # Workerë‹¹ ìµœëŒ€ ì—°ê²° ìˆ˜
    use epoll;                      # Linux ì´ë²¤íŠ¸ ëª¨ë¸
    multi_accept on;
}

# HTTP ì„¤ì •
http {
    include /etc/nginx/mime.types;
    default_type application/octet-stream;

    # ë¡œê·¸ í˜•ì‹
    log_format main '$remote_addr - $remote_user [$time_local] '
                    '"$request" $status $body_bytes_sent';

    access_log /var/log/nginx/access.log main;

    # ì„±ëŠ¥ ìµœì í™”
    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    keepalive_timeout 65;

    # ì„œë²„ ë¸”ë¡ í¬í•¨
    include /etc/nginx/conf.d/*.conf;
}
```

---

## ë¬´ì¤‘ë‹¨ ì„¤ì • ë¦¬ë¡œë“œ

```
nginx -s reload ë™ì‘ ê³¼ì •
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Masterê°€ SIGHUP ì‹ í˜¸ ìˆ˜ì‹ 
        â”‚
        â–¼
2. ìƒˆ ì„¤ì • íŒŒì¼ ê²€ì¦
        â”‚
        â”œâ”€â”€ ì‹¤íŒ¨ â†’ ê¸°ì¡´ ì„¤ì • ìœ ì§€
        â”‚
        â–¼ ì„±ê³µ
3. ìƒˆ Worker í”„ë¡œì„¸ìŠ¤ ìƒì„±
        â”‚
        â–¼
4. ê¸°ì¡´ Workerì— ì¢…ë£Œ ì‹ í˜¸
        â”‚
        â–¼
5. ê¸°ì¡´ WorkerëŠ” í˜„ì¬ ì—°ê²° ì™„ë£Œ í›„ ì¢…ë£Œ
        â”‚
        â–¼
6. ì™„ì „íˆ ìƒˆ ì„¤ì •ìœ¼ë¡œ ì „í™˜ ì™„ë£Œ

* ì„œë¹„ìŠ¤ ì¤‘ë‹¨ ì—†ìŒ!
```

```bash
# ì„¤ì • í…ŒìŠ¤íŠ¸
nginx -t

# ì„¤ì • ë¦¬ë¡œë“œ (ë¬´ì¤‘ë‹¨)
nginx -s reload

# ë˜ëŠ” systemd ì‚¬ìš©
sudo systemctl reload nginx
```

---

## ìì£¼ ì‚¬ìš©í•˜ëŠ” ì„¤ì • ì˜ˆì‹œ

### SPA (React, Vue) ì„œë¹™

```nginx
server {
    listen 80;
    server_name app.example.com;
    root /var/www/app/dist;

    location / {
        try_files $uri $uri/ /index.html;
    }

    # API í”„ë¡ì‹œ
    location /api/ {
        proxy_pass http://localhost:3000/;
    }
}
```

### Rate Limiting

```nginx
http {
    # ìš”ì²­ ì œí•œ ì •ì˜ (10r/s)
    limit_req_zone $binary_remote_addr zone=api:10m rate=10r/s;

    server {
        location /api/ {
            # ë²„ìŠ¤íŠ¸ 20, ì´ˆê³¼ ì‹œ ì§€ì—°
            limit_req zone=api burst=20 nodelay;
            proxy_pass http://backend;
        }
    }
}
```

---

## í•µì‹¬ ì •ë¦¬

1. **ì´ë²¤íŠ¸ ê¸°ë°˜ ë¹„ë™ê¸° ì•„í‚¤í…ì²˜**
   - ë‹¨ì¼ Workerê°€ ìˆ˜ì²œ ê°œ ì—°ê²° ì²˜ë¦¬
   - ì ì€ ë©”ëª¨ë¦¬ë¡œ ë†’ì€ ë™ì‹œì„±

2. **Master-Worker í”„ë¡œì„¸ìŠ¤ ëª¨ë¸**
   - Master: ì„¤ì •/ê´€ë¦¬ (root)
   - Worker: ìš”ì²­ ì²˜ë¦¬ (CPU ì½”ì–´ë‹¹ 1ê°œ)

3. **ë‹¤ì–‘í•œ ì—­í•  ìˆ˜í–‰**
   - ì›¹ ì„œë²„, ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ, ë¡œë“œ ë°¸ëŸ°ì„œ
   - SSL, ìºì‹±, ì••ì¶•

4. **ë¬´ì¤‘ë‹¨ ìš´ì˜**
   - `nginx -s reload`ë¡œ ì„œë¹„ìŠ¤ ì¤‘ë‹¨ ì—†ì´ ì„¤ì • ë³€ê²½

5. **Apache ëŒ€ë¹„ ì¥ì **
   - ë†’ì€ ë™ì‹œ ì—°ê²° ì²˜ë¦¬
   - ì˜ˆì¸¡ ê°€ëŠ¥í•œ ë©”ëª¨ë¦¬ ì‚¬ìš©
   - ì •ì  íŒŒì¼ ì„œë¹™ì— ìµœì í™”

---

## ê´€ë ¨ ë…¸íŠ¸

- [ì›¹ ì„œë²„ ë™ì‘ ì›ë¦¬](web-server-basics.md) - HTTP ì²˜ë¦¬ ê³¼ì •, ì›¹ì„œë²„ vs WAS
- [HTTPS/SSL/TLS ì™„ë²½ ê°€ì´ë“œ](https-ssl-tls-guide.md) - ì•”í˜¸í™”, ì¸ì¦ì„œ, í•¸ë“œì…°ì´í¬

---

## ì°¸ê³  ìë£Œ

- [Inside NGINX: How We Designed for Performance & Scale | NGINX Blog](https://blog.nginx.org/blog/inside-nginx-how-we-designed-for-performance-scale)
- [Understanding NGINX: Architecture & Alternatives | Solo.io](https://www.solo.io/topics/nginx)
- [The Architecture of Open Source Applications: nginx](https://aosabook.org/en/v2/nginx.html)
- [NGINX Documentation](https://nginx.org/en/docs/)
- [Nginxë€? í•„ìš”ì„±, êµ¬ì¡°, ë™ì‘ì›ë¦¬ | Velog](https://velog.io/@gusbms0627/nginx-ë€-í•„ìš”ì„±-êµ¬ì¡°-ë™ì‘ì›ë¦¬)

---

*ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2025-12-21*
