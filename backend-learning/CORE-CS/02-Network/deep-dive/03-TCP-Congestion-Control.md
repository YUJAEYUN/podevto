# TCP Congestion Control - í˜¼ì¡ ì œì–´

> "ë„¤íŠ¸ì›Œí¬ë¥¼ ìœ„í•œ ë°°ë ¤"

## ğŸ¯ í•™ìŠµ ëª©í‘œ

- **í˜¼ì¡ ì œì–´ì˜ í•„ìš”ì„±** ì´í•´
- **Slow Start, Congestion Avoidance** ë™ì‘ ì›ë¦¬
- **Fast Retransmit, Fast Recovery** ì´í•´

## ğŸ¤” ì™œ í˜¼ì¡ ì œì–´ê°€ í•„ìš”í•œê°€?

### ë„¤íŠ¸ì›Œí¬ í˜¼ì¡

```
ì—¬ëŸ¬ ì†¡ì‹ ìê°€ ë™ì‹œì— ë§ì€ ë°ì´í„° ì „ì†¡
â†’ ë¼ìš°í„° ë²„í¼ ì˜¤ë²„í”Œë¡œ
â†’ íŒ¨í‚· ì†ì‹¤ ë°œìƒ
â†’ ì¬ì „ì†¡ ì¦ê°€
â†’ ë” ë§ì€ í˜¼ì¡! (ì•…ìˆœí™˜)
```

### í•´ê²°: í˜¼ì¡ ì œì–´

```
ë„¤íŠ¸ì›Œí¬ ìƒíƒœ ê°ì§€
â†’ ì „ì†¡ ì†ë„ ì¡°ì ˆ
â†’ íŒ¨í‚· ì†ì‹¤ ë°©ì§€ âœ…
```

## ğŸ“š í˜¼ì¡ ì œì–´ ì•Œê³ ë¦¬ì¦˜

### 1. Slow Start (ì²œì²œíˆ ì‹œì‘)

```
ì´ˆê¸° cwnd (Congestion Window) = 1

1 â†’ 2 â†’ 4 â†’ 8 â†’ 16 â†’ 32 (ì§€ìˆ˜ì  ì¦ê°€)

ssthresh (ì„ê³„ê°’)ì— ë„ë‹¬í•˜ë©´ ì„ í˜• ì¦ê°€ë¡œ ì „í™˜
```

**ë™ì‘**:
```
RTT 1: cwnd = 1, 1ê°œ ì „ì†¡
RTT 2: cwnd = 2, 2ê°œ ì „ì†¡
RTT 3: cwnd = 4, 4ê°œ ì „ì†¡
RTT 4: cwnd = 8, 8ê°œ ì „ì†¡
...
```

### 2. Congestion Avoidance (í˜¼ì¡ íšŒí”¼)

```
cwndê°€ ssthreshì— ë„ë‹¬
â†’ ì„ í˜• ì¦ê°€ (1ì”©)

16 â†’ 17 â†’ 18 â†’ 19 (ì„ í˜• ì¦ê°€)
```

### 3. Fast Retransmit (ë¹ ë¥¸ ì¬ì „ì†¡)

```
3ê°œì˜ ì¤‘ë³µ ACK ìˆ˜ì‹ 
â†’ íƒ€ì„ì•„ì›ƒ ëŒ€ê¸° ì—†ì´ ì¦‰ì‹œ ì¬ì „ì†¡

íŒ¨í‚· 1,2,3,4,5 ì „ì†¡
íŒ¨í‚· 3 ì†ì‹¤!
ACK 2, 2, 2 ìˆ˜ì‹  (3ë²ˆ ì¤‘ë³µ)
â†’ íŒ¨í‚· 3 ì¦‰ì‹œ ì¬ì „ì†¡ âš¡
```

### 4. Fast Recovery (ë¹ ë¥¸ íšŒë³µ)

```
Fast Retransmit í›„:
cwnd = ssthresh = cwnd / 2
â†’ Congestion Avoidance ìƒíƒœë¡œ
```

## ğŸ“Š cwnd ë³€í™” ê·¸ë˜í”„

```
cwnd
 ^
 |     Slow Start    |  Congestion  | Fast
 |                   |  Avoidance   | Recovery
 |                  /|             /|
 |                 / |            / |
 |                /  |          /   |
 |               /   |        /     |
 |              /    |      /       |
 |             /     |    /         |
 |            /      |  /           |
 |           /       |/             |
 |    1  2  4  8  16 17 18 19 20    |
 +------------------------------------> ì‹œê°„
          ^               ^
       ssthresh      íŒ¨í‚· ì†ì‹¤
```

## ğŸ’¡ í˜¼ì¡ ê°ì§€ ë°©ë²•

### 1. Timeout

```
íŒ¨í‚· ì „ì†¡ í›„ ì¼ì • ì‹œê°„ ë‚´ ACK ì—†ìŒ
â†’ ì‹¬ê°í•œ í˜¼ì¡ìœ¼ë¡œ íŒë‹¨

ì¡°ì¹˜:
- cwnd = 1 (ì´ˆê¸°í™”)
- ssthresh = cwnd / 2
- Slow Start ì¬ì‹œì‘
```

### 2. 3 Duplicate ACKs

```
ê°™ì€ ACKë¥¼ 3ë²ˆ ë°›ìŒ
â†’ ê°€ë²¼ìš´ í˜¼ì¡ìœ¼ë¡œ íŒë‹¨

ì¡°ì¹˜:
- cwnd = cwnd / 2
- ssthresh = cwnd
- Fast Retransmit + Fast Recovery
```

## ğŸ” TCP Tahoe vs Reno vs NewReno

### TCP Tahoe (êµ¬ë²„ì „)

```
íŒ¨í‚· ì†ì‹¤ ì‹œ:
â†’ cwnd = 1
â†’ Slow Start ì¬ì‹œì‘
```

### TCP Reno (í˜„ì¬ í‘œì¤€)

```
Timeout:
â†’ cwnd = 1 (Slow Start)

3 Dup ACKs:
â†’ cwnd = cwnd / 2 (Fast Recovery)
```

### TCP NewReno (ê°œì„ )

```
ì—¬ëŸ¬ íŒ¨í‚· ì†ì‹¤ ì‹œ ë” íš¨ìœ¨ì 
```

## ğŸ“Š ì‹¤ì œ ì˜ˆì œ

### ì •ìƒ ë™ì‘

```
RTT 1: cwnd=1, ì „ì†¡ 1ê°œ
RTT 2: cwnd=2, ì „ì†¡ 2ê°œ
RTT 3: cwnd=4, ì „ì†¡ 4ê°œ
RTT 4: cwnd=8, ì „ì†¡ 8ê°œ (ssthresh=16)
RTT 5: cwnd=16, ì „ì†¡ 16ê°œ
RTT 6: cwnd=17, ì „ì†¡ 17ê°œ (ì„ í˜• ì¦ê°€)
RTT 7: cwnd=18, ì „ì†¡ 18ê°œ
```

### íŒ¨í‚· ì†ì‹¤ (3 Dup ACKs)

```
RTT 7: cwnd=18
â†’ íŒ¨í‚· ì†ì‹¤ ê°ì§€!
â†’ ssthresh = 18/2 = 9
â†’ cwnd = 9 (Fast Recovery)
RTT 8: cwnd=10, ì „ì†¡ 10ê°œ (ì„ í˜• ì¦ê°€)
```

### íƒ€ì„ì•„ì›ƒ

```
RTT 5: cwnd=16
â†’ íƒ€ì„ì•„ì›ƒ!
â†’ ssthresh = 16/2 = 8
â†’ cwnd = 1 (Slow Start)
RTT 6: cwnd=2
RTT 7: cwnd=4
RTT 8: cwnd=8 (Congestion Avoidance)
RTT 9: cwnd=9
```

## ğŸ¯ íë¦„ ì œì–´ vs í˜¼ì¡ ì œì–´

```
ì‹¤ì œ ì „ì†¡ëŸ‰ = min(cwnd, rwnd)

cwnd: í˜¼ì¡ ìœˆë„ìš° (ì†¡ì‹ ìê°€ ê²°ì •)
rwnd: ìˆ˜ì‹  ìœˆë„ìš° (ìˆ˜ì‹ ìê°€ ì•Œë¦¼)

ë‘˜ ì¤‘ ì‘ì€ ê°’ìœ¼ë¡œ ì œí•œ!
```

## ğŸ’» ì‹¤ìŠµ

### cwnd í™•ì¸ (Linux)

```bash
# cwnd ê°’ í™•ì¸
ss -i

# ê²°ê³¼:
cubic wscale:7,7 rto:204 rtt:3.5/1 ato:40 
cwnd:10 send 34.3Mbps ...
#^^^^
```

## ğŸ”— ë‹¤ìŒ í•™ìŠµ

- [04-HTTP-Versions.md](./04-HTTP-Versions.md)

---

**"í˜¼ì¡ ì œì–´ëŠ” ë„¤íŠ¸ì›Œí¬ë¥¼ ìœ„í•œ ë°°ë ¤"**
