# TCP Basics - TCP ê¸°ì´ˆ

> "ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ë°ì´í„° ì „ì†¡"

## ğŸ¯ í•™ìŠµ ëª©í‘œ

- **TCPì˜ íŠ¹ì§•** ì´í•´
- **ì—°ê²° ì§€í–¥ê³¼ ì‹ ë¢°ì„±** ë³´ì¥ ë©”ì»¤ë‹ˆì¦˜
- **TCP vs UDP** ì°¨ì´ì 
- **TCP í—¤ë” êµ¬ì¡°** íŒŒì•…

## ğŸ“š TCPë€?

**Transmission Control Protocol**
- ì—°ê²° ì§€í–¥ (Connection-Oriented)
- ì‹ ë¢°ì„± ë³´ì¥ (Reliable)
- ìˆœì„œ ë³´ì¥ (Ordered)
- íë¦„ ì œì–´ (Flow Control)
- í˜¼ì¡ ì œì–´ (Congestion Control)

## ğŸ” TCPì˜ íŠ¹ì§•

### 1. ì—°ê²° ì§€í–¥

```
ì—°ê²° ìˆ˜ë¦½ (3-Way Handshake)
    â†“
ë°ì´í„° ì „ì†¡
    â†“
ì—°ê²° ì¢…ë£Œ (4-Way Handshake)
```

### 2. ì‹ ë¢°ì„± ë³´ì¥

```
ì†¡ì‹ : ë°ì´í„° ì „ì†¡ â†’ ëŒ€ê¸°
ìˆ˜ì‹ : ë°ì´í„° ìˆ˜ì‹  â†’ ACK ì „ì†¡
ì†¡ì‹ : ACK ìˆ˜ì‹  â†’ ì™„ë£Œ

íƒ€ì„ì•„ì›ƒ: ACK ì—†ìœ¼ë©´ ì¬ì „ì†¡
```

### 3. ìˆœì„œ ë³´ì¥

```
íŒ¨í‚· 1 (seq=100)
íŒ¨í‚· 2 (seq=200)
íŒ¨í‚· 3 (seq=300)

ë„ì°© ìˆœì„œ: 1, 3, 2
ì¬ì •ë ¬: 1, 2, 3 âœ…
```

## ğŸ“Š TCP í—¤ë” êµ¬ì¡°

```
 0                   15                              31
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Source Port      |  Destination Port             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|           Sequence Number                         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|       Acknowledgment Number                       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Offset|Rsrvd|Flags|  Window Size                  |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Checksum         |  Urgent Pointer               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

### ì£¼ìš” í•„ë“œ

```
Source Port: ì†¡ì‹  í¬íŠ¸ (16ë¹„íŠ¸)
Destination Port: ìˆ˜ì‹  í¬íŠ¸ (16ë¹„íŠ¸)
Sequence Number: ë°ì´í„° ìˆœì„œ ë²ˆí˜¸
Acknowledgment Number: í™•ì¸ ì‘ë‹µ ë²ˆí˜¸
Flags: SYN, ACK, FIN, RST ë“±
Window Size: ìˆ˜ì‹  ë²„í¼ í¬ê¸°
```

## ğŸ’¡ TCP í”Œë˜ê·¸

```
SYN (Synchronize): ì—°ê²° ì‹œì‘
ACK (Acknowledgment): í™•ì¸ ì‘ë‹µ
FIN (Finish): ì—°ê²° ì¢…ë£Œ
RST (Reset): ì—°ê²° ê°•ì œ ì¢…ë£Œ
PSH (Push): ì¦‰ì‹œ ì „ë‹¬
URG (Urgent): ê¸´ê¸‰ ë°ì´í„°
```

## ğŸ”„ ì—°ê²° ìˆ˜ë¦½ (3-Way Handshake)

```
Client                    Server
  â”‚                         â”‚
  â”‚  SYN (seq=100)          â”‚
  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚
  â”‚                         â”‚
  â”‚  SYN-ACK (seq=300,      â”‚
  â”‚          ack=101)       â”‚
  â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
  â”‚                         â”‚
  â”‚  ACK (ack=301)          â”‚
  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚
  â”‚                         â”‚
  â”‚   Connected!            â”‚
```

## ğŸ”„ ì—°ê²° ì¢…ë£Œ (4-Way Handshake)

```
Client                    Server
  â”‚                         â”‚
  â”‚  FIN                    â”‚
  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚
  â”‚                         â”‚
  â”‚  ACK                    â”‚
  â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
  â”‚                         â”‚
  â”‚  FIN                    â”‚
  â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
  â”‚                         â”‚
  â”‚  ACK                    â”‚
  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚
  â”‚                         â”‚
  â”‚   Closed!               â”‚
```

## âš–ï¸ TCP vs UDP

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ íŠ¹ì§•        â”‚ TCP     â”‚ UDP     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì—°ê²°        â”‚ ìˆìŒ    â”‚ ì—†ìŒ    â”‚
â”‚ ì‹ ë¢°ì„±      â”‚ ë³´ì¥    â”‚ ë¯¸ë³´ì¥  â”‚
â”‚ ìˆœì„œ        â”‚ ë³´ì¥    â”‚ ë¯¸ë³´ì¥  â”‚
â”‚ ì†ë„        â”‚ ëŠë¦¼    â”‚ ë¹ ë¦„    â”‚
â”‚ ì˜¤ë²„í—¤ë“œ    â”‚ í¼      â”‚ ì‘ìŒ    â”‚
â”‚ ì‚¬ìš© ì˜ˆ     â”‚ HTTP    â”‚ DNS     â”‚
â”‚             â”‚ FTP     â”‚ ìŠ¤íŠ¸ë¦¬ë°â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ’» ì‹¤ìŠµ

### TCP ì—°ê²° í™•ì¸

```bash
# ì—´ë¦° TCP ì—°ê²° í™•ì¸
netstat -tan

# ê²°ê³¼:
Proto Recv-Q Send-Q Local Address      Foreign Address    State
tcp        0      0 192.168.1.10:5000  93.184.216.34:80   ESTABLISHED
tcp        0      0 192.168.1.10:5001  8.8.8.8:443        TIME_WAIT
```

### TCP íŒ¨í‚· ìº¡ì²˜

```bash
# TCP íŒ¨í‚·ë§Œ ìº¡ì²˜
sudo tcpdump -i any tcp

# íŠ¹ì • í¬íŠ¸
sudo tcpdump -i any tcp port 80
```

## ğŸ¯ í¬íŠ¸ ë²ˆí˜¸

### Well-Known Ports (0-1023)

```
20, 21: FTP
22:     SSH
23:     Telnet
25:     SMTP
53:     DNS
80:     HTTP
443:    HTTPS
```

### Registered Ports (1024-49151)

```
3306:   MySQL
5432:   PostgreSQL
6379:   Redis
8080:   HTTP Alternate
```

### Dynamic/Private Ports (49152-65535)

```
í´ë¼ì´ì–¸íŠ¸ê°€ ì‚¬ìš©í•˜ëŠ” ì„ì‹œ í¬íŠ¸
```

## ğŸ”— ë‹¤ìŒ í•™ìŠµ

- [04-UDP-Basics.md](./04-UDP-Basics.md)
- [../deep-dive/01-TCP-3Way-Handshake.md](../deep-dive/01-TCP-3Way-Handshake.md)

---

**"TCPëŠ” ëŠë¦¬ì§€ë§Œ ì‹ ë¢°í•  ìˆ˜ ìˆë‹¤"**
