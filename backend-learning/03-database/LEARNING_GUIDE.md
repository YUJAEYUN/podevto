# 데이터베이스 학습 가이드

> 데이터베이스 성능 최적화와 효율적인 쿼리 작성을 위한 학습 자료

## 학습 자료

### Notes (개념 정리)
- [N+1 쿼리 문제](notes/n-plus-1-query-problem.md) - 가장 흔한 성능 안티패턴과 해결 방법

### Code Examples (코드 분석)
- (준비 중)

### Resources (참고 자료)
- (준비 중)

---

## 핵심 개념 요약

### 데이터베이스 성능 최적화란?

```
┌─────────────────────────────────────────────────────────────────────┐
│                    데이터베이스 성능 최적화 영역                      │
│                                                                     │
│   ┌──────────────┐    ┌──────────────┐    ┌──────────────┐         │
│   │   쿼리 최적화  │    │   인덱스 설계  │    │   스키마 설계  │       │
│   │  (Query)     │    │   (Index)    │    │   (Schema)   │         │
│   └──────┬───────┘    └──────┬───────┘    └──────┬───────┘         │
│          │                   │                   │                  │
│          └───────────────────┼───────────────────┘                  │
│                              ↓                                      │
│                    ┌─────────────────┐                              │
│                    │   빠른 응답 시간   │                            │
│                    │  + 적은 리소스    │                              │
│                    └─────────────────┘                              │
└─────────────────────────────────────────────────────────────────────┘
```

**데이터베이스 성능 최적화**는 쿼리 응답 시간을 줄이고, 서버 리소스를 효율적으로 사용하며, 확장 가능한 시스템을 구축하기 위한 기술입니다.

### 주요 성능 문제와 해결책

```
문제 1: N+1 쿼리 문제
─────────────────────────────────────
원인: 루프 안에서 반복적인 쿼리 실행
해결: JOIN, Eager Loading, DataLoader

문제 2: 풀 테이블 스캔
─────────────────────────────────────
원인: 적절한 인덱스 부재
해결: 쿼리 패턴에 맞는 인덱스 생성

문제 3: 불필요한 데이터 조회
─────────────────────────────────────
원인: SELECT * 남용
해결: 필요한 컬럼만 명시적으로 선택

문제 4: 잘못된 조인 순서
─────────────────────────────────────
원인: 큰 테이블을 먼저 스캔
해결: 실행 계획 분석 및 힌트 사용
```

---

## 학습 로드맵

### 1단계: 기초 개념 (현재)
- [x] N+1 쿼리 문제 이해
- [ ] SQL 기본 복습 (SELECT, JOIN, WHERE)
- [ ] 인덱스 기초 개념

### 2단계: 쿼리 최적화
- [ ] EXPLAIN / 실행 계획 분석
- [ ] 인덱스 설계 전략
- [ ] 서브쿼리 vs JOIN 선택

### 3단계: ORM과 쿼리 빌더
- [ ] Eloquent (Laravel) 최적화
- [ ] Prisma 쿼리 최적화
- [ ] TypeORM / Drizzle 비교

### 4단계: 고급 주제
- [ ] 데이터베이스 정규화 vs 비정규화
- [ ] 읽기/쓰기 분리 (Read Replica)
- [ ] 캐싱 전략 (Redis, Memcached)
- [ ] 샤딩과 파티셔닝

---

## 핵심 질문들

이 학습 자료를 통해 답할 수 있어야 하는 질문들:

1. **N+1 문제란 무엇이고 왜 발생하는가?**
   → 1개 초기 쿼리 + N개 추가 쿼리, 루프 내 DB 호출이 원인

2. **JOIN과 서브쿼리 중 언제 무엇을 사용해야 하는가?**
   → (추가 예정)

3. **인덱스는 언제 생성하고 어떤 컬럼에 걸어야 하는가?**
   → (추가 예정)

4. **EXPLAIN 결과를 어떻게 해석하는가?**
   → (추가 예정)

---

## 핵심 개념 용어집

| 용어 | 설명 |
|------|------|
| **N+1 문제** | 1개 쿼리 후 N개의 추가 쿼리가 실행되는 비효율적 패턴 |
| **Eager Loading** | 연관 데이터를 미리 한 번에 로드하는 기법 |
| **Lazy Loading** | 연관 데이터를 실제 접근 시점에 로드하는 기법 |
| **인덱스 (Index)** | 검색 속도를 높이기 위한 데이터 구조 |
| **실행 계획 (Execution Plan)** | DB가 쿼리를 어떻게 실행할지 보여주는 계획 |
| **풀 테이블 스캔** | 테이블 전체를 읽는 비효율적인 조회 방식 |
| **정규화 (Normalization)** | 데이터 중복을 줄이기 위한 테이블 설계 기법 |
| **비정규화 (Denormalization)** | 성능을 위해 의도적으로 중복을 허용하는 설계 |

---

*마지막 업데이트: 2025-12-21*
