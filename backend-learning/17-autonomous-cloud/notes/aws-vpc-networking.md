# AWS VPC ë„¤íŠ¸ì›Œí‚¹ ì™„ë²½ ê°€ì´ë“œ

> í•™ìŠµì¼: 2026-01-13
> ëª©í‘œ: AWS VPCì˜ ì›ë¦¬ì™€ ë„¤íŠ¸ì›Œí‚¹ ê°œë…ì„ ì²˜ìŒë¶€í„° ì´í•´í•˜ê¸°

## ğŸ“‘ ëª©ì°¨

1. [ë„¤íŠ¸ì›Œí‚¹ ê¸°ì´ˆ ê°œë…](#1-ë„¤íŠ¸ì›Œí‚¹-ê¸°ì´ˆ-ê°œë…)
2. [VPCë€ ë¬´ì—‡ì¸ê°€](#2-vpcë€-ë¬´ì—‡ì¸ê°€)
3. [Internet Gateway vs NAT Gateway](#3-internet-gateway-vs-nat-gateway)
4. [Public Subnet vs Private Subnet](#4-public-subnet-vs-private-subnet)
5. [ë³´ì•ˆ ì„¤ì •](#5-ë³´ì•ˆ-ì„¤ì •)
6. [ì‹¤ì „ ë°°í¬ ì‹œë‚˜ë¦¬ì˜¤](#6-ì‹¤ì „-ë°°í¬-ì‹œë‚˜ë¦¬ì˜¤)
7. [ë¹„ìš© ìµœì í™” ì „ëµ](#7-ë¹„ìš©-ìµœì í™”-ì „ëµ)
8. [í•µì‹¬ ì •ë¦¬](#8-í•µì‹¬-ì •ë¦¬)

---

## 1. ë„¤íŠ¸ì›Œí‚¹ ê¸°ì´ˆ ê°œë…

### 1.1 IP ì£¼ì†Œì™€ CIDR

**IP ì£¼ì†Œì˜ ì¢…ë¥˜:**
- **Public IP**: ì¸í„°ë„·ì—ì„œ ì§ì ‘ ì ‘ê·¼ ê°€ëŠ¥í•œ IP (ì˜ˆ: 54.123.45.67)
- **Private IP**: ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬ì—ì„œë§Œ ì‚¬ìš©í•˜ëŠ” IP (ì˜ˆ: 10.0.1.5, 192.168.1.10)

**CIDR í‘œê¸°ë²•:**
```
10.0.0.0/16  â†’ 10.0.0.0 ~ 10.0.255.255 (65,536ê°œ IP)
10.0.1.0/24  â†’ 10.0.1.0 ~ 10.0.1.255 (256ê°œ IP)
10.0.1.5/32  â†’ 10.0.1.5 (ë‹¨ì¼ IP)
```

### 1.2 NAT (Network Address Translation)

**NATì˜ ì—­í• :**
- Private IP â†” Public IP ë³€í™˜
- ì œí•œëœ Public IPë¥¼ ì—¬ëŸ¬ Private IPê°€ ê³µìœ í•  ìˆ˜ ìˆê²Œ í•¨
- ë³´ì•ˆ í–¥ìƒ (ì™¸ë¶€ì—ì„œ ë‚´ë¶€ IP êµ¬ì¡°ë¥¼ ì•Œ ìˆ˜ ì—†ìŒ)

**NAT ë³€í™˜ ì˜ˆì‹œ:**
```
[Private ì„œë²„ 10.0.1.5:8080]
    â†“ (NAT ë³€í™˜)
[Public IP 54.123.45.67:52341]
    â†“
[ì™¸ë¶€ API ì„œë²„]
```

### 1.3 ë¼ìš°íŒ… í…Œì´ë¸”

**ë¼ìš°íŒ… í…Œì´ë¸”ì´ë€:**
- ë„¤íŠ¸ì›Œí¬ íŒ¨í‚·ì´ ì–´ë””ë¡œ ê°€ì•¼ í•˜ëŠ”ì§€ ì•Œë ¤ì£¼ëŠ” "ì§€ë„"
- ëª©ì ì§€ IPì— ë”°ë¼ íŒ¨í‚·ì„ ì–´ëŠ ê²Œì´íŠ¸ì›¨ì´ë¡œ ë³´ë‚¼ì§€ ê²°ì •

**ë¼ìš°íŒ… ì˜ˆì‹œ:**
```
Destination     Target
10.0.0.0/16     local         # ê°™ì€ VPC ë‚´ë¶€ í†µì‹ 
0.0.0.0/0       igw-xxx       # ëª¨ë“  ì™¸ë¶€ íŠ¸ë˜í”½ â†’ IGW
```

### 1.4 DNSì™€ Port

**DNS (Domain Name System):**
- ë„ë©”ì¸ ì´ë¦„ì„ IP ì£¼ì†Œë¡œ ë³€í™˜
- ì˜ˆ: `api.example.com` â†’ `54.123.45.67`
- ë¸Œë¼ìš°ì €ì™€ OSëŠ” DNS ê²°ê³¼ë¥¼ ìºì‹±í•¨ (ì„±ëŠ¥ ìµœì í™”)

**Port ë²ˆí˜¸:**
- HTTP: 80
- HTTPS: 443
- PostgreSQL: 5432
- Custom Backend: 3000, 8080 ë“±

---

## 2. VPCë€ ë¬´ì—‡ì¸ê°€

### 2.1 VPCì˜ ê°œë…

**VPC (Virtual Private Cloud):**
- AWS í´ë¼ìš°ë“œ ë‚´ì— ë…¼ë¦¬ì ìœ¼ë¡œ ê²©ë¦¬ëœ "ë‚˜ë§Œì˜ ì‚¬ì„¤ ë„¤íŠ¸ì›Œí¬"
- ë¬¼ë¦¬ì ìœ¼ë¡œëŠ” AWSì˜ ê±°ëŒ€í•œ ë°ì´í„°ì„¼í„°ë¥¼ ê³µìœ í•˜ì§€ë§Œ, ë…¼ë¦¬ì ìœ¼ë¡œëŠ” ì™„ì „íˆ ë¶„ë¦¬ë¨
- IP ì£¼ì†Œ ë²”ìœ„, ì„œë¸Œë„·, ë¼ìš°íŒ… í…Œì´ë¸”, ê²Œì´íŠ¸ì›¨ì´ ë“±ì„ ì§ì ‘ ì œì–´

**VPCê°€ í•„ìš”í•œ ì´ìœ :**
1. **ë³´ì•ˆ**: ë‹¤ë¥¸ AWS ê³ ê°ê³¼ ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬
2. **ì œì–´**: ë„¤íŠ¸ì›Œí¬ êµ¬ì¡°ë¥¼ ì›í•˜ëŠ” ëŒ€ë¡œ ì„¤ê³„
3. **ìœ ì—°ì„±**: Public/Private ì„œë¸Œë„· ë¶„ë¦¬ë¡œ ë³´ì•ˆ ê°•í™”

### 2.2 VPC ë„¤íŠ¸ì›Œí¬ ê°€ìƒí™” ê¸°ìˆ 

**SDN (Software Defined Networking):**
- ë¬¼ë¦¬ì  ë„¤íŠ¸ì›Œí¬ ì¥ë¹„ ì—†ì´ ì†Œí”„íŠ¸ì›¨ì–´ë¡œ ë„¤íŠ¸ì›Œí¬ êµ¬ì„±
- AWSê°€ ìë™ìœ¼ë¡œ ë¼ìš°íŒ…, ë°©í™”ë²½, ë¡œë“œë°¸ëŸ°ì‹± ì²˜ë¦¬

**VXLAN (Virtual Extensible LAN):**
- íŒ¨í‚· ìº¡ìŠí™” ê¸°ìˆ ë¡œ ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬ êµ¬í˜„
- ì›ë³¸ íŒ¨í‚·ì„ AWS ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬ íŒ¨í‚·ìœ¼ë¡œ ê°ì‹¸ì„œ ì „ì†¡
- ëª©ì ì§€ì—ì„œ ë‹¤ì‹œ ì›ë³¸ íŒ¨í‚·ìœ¼ë¡œ ë³µì›

**ê²©ë¦¬ ë°©ì‹:**
```
ì‚¬ìš©ì Aì˜ íŒ¨í‚·: [VXLAN ID: 1001] + [ì›ë³¸ íŒ¨í‚·]
ì‚¬ìš©ì Bì˜ íŒ¨í‚·: [VXLAN ID: 1002] + [ì›ë³¸ íŒ¨í‚·]
â†’ ê°™ì€ ë¬¼ë¦¬ ë„¤íŠ¸ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ì§€ë§Œ ë…¼ë¦¬ì ìœ¼ë¡œ ì™„ì „íˆ ë¶„ë¦¬
```

### 2.3 Default VPC

**Default VPCë€:**
- AWS ê³„ì • ìƒì„± ì‹œ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì§€ëŠ” VPC
- ì´ë¯¸ Internet Gateway, Public Subnet, ë¼ìš°íŒ… í…Œì´ë¸”ì´ ì„¤ì •ë¨
- EC2ë¥¼ ë°”ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ê°„í¸í•œ í™˜ê²½

**Default VPC ì„¤ì •:**
- CIDR: `172.31.0.0/16`
- ê° AZë§ˆë‹¤ Public Subnet ìë™ ìƒì„±
- ëª¨ë“  ì„œë¸Œë„·ì´ IGWë¡œ ì—°ê²°ë˜ì–´ ìˆìŒ

---

## 3. Internet Gateway vs NAT Gateway

> **ê°€ì¥ í—·ê°ˆë¦¬ëŠ” ë¶€ë¶„! í™•ì‹¤íˆ ì´í•´í•˜ê³  ë„˜ì–´ê°€ê¸°**

### 3.1 Internet Gateway (IGW)

**Internet Gatewayì˜ ì—­í• :**
1. **VPCì™€ ì¸í„°ë„·ì˜ ìœ ì¼í•œ ì—°ê²°ì **
2. **Public IP â†” Private IP ë³€í™˜ (NAT ìˆ˜í–‰)**
3. **ì–‘ë°©í–¥ í†µì‹  í—ˆìš©** (ì‚¬ìš©ì â†’ EC2, EC2 â†’ ì¸í„°ë„·)

**ì¤‘ìš”í•œ ì‚¬ì‹¤:**
- EC2 ì¸ìŠ¤í„´ìŠ¤ëŠ” ì‹¤ì œë¡œ Public IPë¥¼ "ê°–ê³  ìˆì§€ ì•ŠìŒ"
- Public IPëŠ” IGWê°€ ê´€ë¦¬í•˜ëŠ” "ë§¤í•‘ í…Œì´ë¸”"ì—ë§Œ ì¡´ì¬
- EC2ëŠ” ìì‹ ì˜ Private IPë§Œ ì•Œê³  ìˆìŒ

**IGWì˜ NAT í…Œì´ë¸” ì˜ˆì‹œ:**
```
Public IP           Private IP        Instance
54.123.45.67    â†’   10.0.1.5         i-abc123 (Web Server)
54.123.45.68    â†’   10.0.1.6         i-def456 (API Server)
```

**í†µì‹  íë¦„:**
```
[ì‚¬ìš©ì]
    â†“ ëª©ì ì§€: 54.123.45.67:80
[Internet Gateway]
    â†“ NAT ë³€í™˜: 54.123.45.67 â†’ 10.0.1.5
[EC2 Public Subnet]
```

### 3.2 NAT Gateway

**NAT Gatewayì˜ ì—­í• :**
1. **Private Subnetì˜ ì•„ì›ƒë°”ìš´ë“œ ì „ìš© ì¸í„°ë„· ì ‘ê·¼**
2. **Private IP â†’ Public IP ë³€í™˜ (ë‹¨ë°©í–¥)**
3. **ì™¸ë¶€ì—ì„œ Private ì„œë¸Œë„·ìœ¼ë¡œëŠ” ì ‘ê·¼ ë¶ˆê°€**

**NAT Gatewayê°€ í•„ìš”í•œ ì´ìœ :**
- Private Subnetì˜ EC2ëŠ” ì¸í„°ë„·ì— ì§ì ‘ ì—°ê²°í•  ìˆ˜ ì—†ìŒ
- í•˜ì§€ë§Œ ì™¸ë¶€ API í˜¸ì¶œ, ì†Œí”„íŠ¸ì›¨ì–´ ì—…ë°ì´íŠ¸ëŠ” í•„ìš”í•¨
- NAT Gatewayë¥¼ í†µí•´ ì•„ì›ƒë°”ìš´ë“œë§Œ í—ˆìš©

**í†µì‹  íë¦„:**
```
[Private EC2 10.0.2.5]
    â†“ ëª©ì ì§€: github.com
[NAT Gateway 10.0.1.100]
    â†“ NAT ë³€í™˜: 10.0.2.5 â†’ NAT Gatewayì˜ Public IP
[Internet Gateway]
    â†“
[ì¸í„°ë„· (github.com)]
```

### 3.3 IGW vs NAT Gateway ë¹„êµí‘œ

| í•­ëª© | Internet Gateway | NAT Gateway |
|------|-----------------|-------------|
| **ìœ„ì¹˜** | VPC ë ˆë²¨ (ì „ì²´ VPCì— 1ê°œ) | Public Subnet ë‚´ë¶€ |
| **í†µì‹  ë°©í–¥** | ì–‘ë°©í–¥ (Inbound + Outbound) | ë‹¨ë°©í–¥ (Outboundë§Œ) |
| **ì‚¬ìš© ëŒ€ìƒ** | Public Subnet | Private Subnet |
| **Public IP** | í•„ìš” (EC2ì— ìë™ í• ë‹¹) | ë¶ˆí•„ìš” (Private IPë§Œ) |
| **ë¹„ìš©** | ë¬´ë£Œ | ì‹œê°„ë‹¹ $0.045 + ë°ì´í„° ì „ì†¡ë£Œ |
| **ìš©ë„** | ì™¸ë¶€â†”ì„œë²„ í†µì‹  | ì„œë²„â†’ì™¸ë¶€ í†µì‹ ë§Œ |

### 3.4 ìì£¼ í•˜ëŠ” ì˜¤í•´ ì •ë¦¬

**âŒ ì˜¤í•´ 1: "Public Subnetì€ IGW ì—†ì´ë„ ì¸í„°ë„· ì ‘ê·¼ ê°€ëŠ¥í•˜ë‹¤"**
- âœ… ì •ë‹µ: Public Subnetë„ ë°˜ë“œì‹œ IGWë¥¼ ê±°ì³ì•¼ ì¸í„°ë„· ì ‘ê·¼ ê°€ëŠ¥
- IGWê°€ ì—†ìœ¼ë©´ Public IPê°€ ìˆì–´ë„ ì™¸ë¶€ í†µì‹  ë¶ˆê°€

**âŒ ì˜¤í•´ 2: "NAT GatewayëŠ” ì‚¬ìš©ìê°€ Private ì„œë¸Œë„·ì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ ê²ƒì´ë‹¤"**
- âœ… ì •ë‹µ: NAT GatewayëŠ” Private â†’ ì™¸ë¶€ í†µì‹ ë§Œ ë‹´ë‹¹
- ì‚¬ìš©ì â†’ Private í†µì‹ ì€ ALBë‚˜ API Gateway ì‚¬ìš©

**âŒ ì˜¤í•´ 3: "Public EC2ë¥¼ í”„ë¡ì‹œë¡œ ì‚¬ìš©í•˜ë©´ NAT Gateway ëŒ€ì²´ ê°€ëŠ¥í•˜ë‹¤"**
- âœ… ì •ë‹µ: ê¸°ìˆ ì ìœ¼ë¡œ ê°€ëŠ¥í•˜ì§€ë§Œ ì•ˆí‹°íŒ¨í„´
- NAT ì†Œí”„íŠ¸ì›¨ì–´ ì„¤ì¹˜, IP í¬ì›Œë”© ì„¤ì •, ë³´ì•ˆ ê´€ë¦¬ ë“± ë³µì¡í•¨
- NAT Gateway ì‚¬ìš©ì´ ì •ì„

---

## 4. Public Subnet vs Private Subnet

### 4.1 Public Subnet

**íŠ¹ì§•:**
- ë¼ìš°íŒ… í…Œì´ë¸”ì— IGWë¡œ ê°€ëŠ” ê²½ë¡œ ìˆìŒ: `0.0.0.0/0 â†’ igw-xxx`
- EC2 ì‹¤í–‰ ì‹œ Public IP ìë™ í• ë‹¹
- ì™¸ë¶€ ì¸í„°ë„·ê³¼ ì§ì ‘ í†µì‹  ê°€ëŠ¥

**ë¼ìš°íŒ… í…Œì´ë¸”:**
```
Destination     Target
10.0.0.0/16     local         # VPC ë‚´ë¶€ í†µì‹ 
0.0.0.0/0       igw-123abc    # ëª¨ë“  ì™¸ë¶€ â†’ IGW
```

**ì‚¬ìš© ì‚¬ë¡€:**
- ì›¹ ì„œë²„ (Nginx, Apache)
- ë¡œë“œ ë°¸ëŸ°ì„œ (ALB, NLB)
- Bastion Host (SSH ì ‘ì†ìš©)
- NAT Gateway

### 4.2 Private Subnet

**íŠ¹ì§•:**
- ë¼ìš°íŒ… í…Œì´ë¸”ì— IGW ê²½ë¡œ ì—†ìŒ
- Public IP í• ë‹¹ ì•ˆë¨ (Private IPë§Œ)
- ì™¸ë¶€ì—ì„œ ì§ì ‘ ì ‘ê·¼ ë¶ˆê°€
- ì•„ì›ƒë°”ìš´ë“œëŠ” NAT Gateway í†µí•´ ê°€ëŠ¥

**ë¼ìš°íŒ… í…Œì´ë¸”:**
```
Destination     Target
10.0.0.0/16     local              # VPC ë‚´ë¶€ í†µì‹ 
0.0.0.0/0       nat-456def         # ì™¸ë¶€ â†’ NAT Gateway
```

**ì‚¬ìš© ì‚¬ë¡€:**
- ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ (ë°±ì—”ë“œ API)
- ë°ì´í„°ë² ì´ìŠ¤ (RDS, ElastiCache)
- ë°°ì¹˜ ì‘ì—… ì„œë²„
- ë¯¼ê°í•œ ë°ì´í„° ì²˜ë¦¬ ì„œë²„

### 4.3 ë„¤íŠ¸ì›Œí¬ êµ¬ì„± ì˜ˆì‹œ

**ì „í˜•ì ì¸ 3-Tier ì•„í‚¤í…ì²˜:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      VPC (10.0.0.0/16)                  â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚        Public Subnet (10.0.1.0/24)              â”‚  â”‚
â”‚  â”‚                                                  â”‚  â”‚
â”‚  â”‚  â€¢ ALB (ë¡œë“œ ë°¸ëŸ°ì„œ)                             â”‚  â”‚
â”‚  â”‚  â€¢ NAT Gateway                                   â”‚  â”‚
â”‚  â”‚  â€¢ Bastion Host                                  â”‚  â”‚
â”‚  â”‚                                                  â”‚  â”‚
â”‚  â”‚  Route: 0.0.0.0/0 â†’ igw-xxx                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                         â†•                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚       Private Subnet (10.0.2.0/24)              â”‚  â”‚
â”‚  â”‚                                                  â”‚  â”‚
â”‚  â”‚  â€¢ ECS/EC2 (ë°±ì—”ë“œ API)                         â”‚  â”‚
â”‚  â”‚  â€¢ Lambda Functions                              â”‚  â”‚
â”‚  â”‚                                                  â”‚  â”‚
â”‚  â”‚  Route: 0.0.0.0/0 â†’ nat-xxx                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                         â†•                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚       Private Subnet (10.0.3.0/24)              â”‚  â”‚
â”‚  â”‚                                                  â”‚  â”‚
â”‚  â”‚  â€¢ RDS (PostgreSQL)                              â”‚  â”‚
â”‚  â”‚  â€¢ ElastiCache (Redis)                           â”‚  â”‚
â”‚  â”‚                                                  â”‚  â”‚
â”‚  â”‚  Route: 10.0.0.0/16 â†’ local                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. ë³´ì•ˆ ì„¤ì •

### 5.1 Security Group vs NACL

**Security Group (ë³´ì•ˆ ê·¸ë£¹):**
- **ì¸ìŠ¤í„´ìŠ¤ ë ˆë²¨** ë°©í™”ë²½
- **Stateful**: ìš”ì²­ì„ í—ˆìš©í•˜ë©´ ì‘ë‹µë„ ìë™ í—ˆìš©
- **Allow ê·œì¹™ë§Œ** ì„¤ì • ê°€ëŠ¥ (Deny ë¶ˆê°€)
- ê¸°ë³¸ê°’: ëª¨ë“  Inbound ì°¨ë‹¨, ëª¨ë“  Outbound í—ˆìš©

**NACL (Network Access Control List):**
- **ì„œë¸Œë„· ë ˆë²¨** ë°©í™”ë²½
- **Stateless**: ìš”ì²­ê³¼ ì‘ë‹µì„ ê°ê° í—ˆìš©í•´ì•¼ í•¨
- **Allow/Deny ëª¨ë‘** ì„¤ì • ê°€ëŠ¥
- ê¸°ë³¸ê°’: ëª¨ë“  Inbound/Outbound í—ˆìš©

**ë¹„êµí‘œ:**

| í•­ëª© | Security Group | NACL |
|------|----------------|------|
| ì ìš© ëŒ€ìƒ | EC2/RDS ë“± ì¸ìŠ¤í„´ìŠ¤ | ì„œë¸Œë„· ì „ì²´ |
| ìƒíƒœ | Stateful | Stateless |
| ê·œì¹™ | Allowë§Œ | Allow/Deny |
| ê·œì¹™ í‰ê°€ | ëª¨ë“  ê·œì¹™ í™•ì¸ | ë²ˆí˜¸ ìˆœì„œëŒ€ë¡œ |
| ê¸°ë³¸ ì •ì±… | Deny All Inbound | Allow All |

### 5.2 Security Group ì„¤ì • ì˜ˆì‹œ

**ALB (Application Load Balancer) Security Group:**
```yaml
Inbound Rules:
  - Type: HTTP
    Port: 80
    Source: 0.0.0.0/0         # ì „ ì„¸ê³„ ì ‘ì† í—ˆìš©

  - Type: HTTPS
    Port: 443
    Source: 0.0.0.0/0

Outbound Rules:
  - Type: Custom TCP
    Port: 3000
    Destination: sg-ecs-backend   # ECS ë³´ì•ˆ ê·¸ë£¹ìœ¼ë¡œë§Œ
```

**ECS Backend Security Group:**
```yaml
Inbound Rules:
  - Type: Custom TCP
    Port: 3000
    Source: sg-alb-xxx        # ALBì—ì„œë§Œ ì ‘ì† í—ˆìš©

Outbound Rules:
  - Type: PostgreSQL
    Port: 5432
    Destination: sg-rds-xxx   # RDSë¡œë§Œ ì ‘ì†

  - Type: HTTPS
    Port: 443
    Destination: 0.0.0.0/0    # ì™¸ë¶€ API í˜¸ì¶œ
```

**RDS Security Group:**
```yaml
Inbound Rules:
  - Type: PostgreSQL
    Port: 5432
    Source: sg-ecs-backend    # ECSì—ì„œë§Œ ì ‘ì† í—ˆìš©

Outbound Rules:
  - (í•„ìš” ì—†ìŒ, RDSëŠ” ì•„ì›ƒë°”ìš´ë“œ ì•ˆí•¨)
```

### 5.3 ìµœì†Œ ê¶Œí•œ ì›ì¹™

**ë³´ì•ˆ ì„¤ê³„ ì›ì¹™:**
1. **í•„ìš”í•œ í¬íŠ¸ë§Œ ì—´ê¸°**: ì „ì²´(0.0.0.0/0)ë³´ë‹¤ íŠ¹ì • IP/ë³´ì•ˆê·¸ë£¹ë§Œ
2. **ê³„ì¸µë³„ ë¶„ë¦¬**: ALB â†’ Backend â†’ DB ìˆœì„œë¡œë§Œ ì ‘ê·¼
3. **Private Subnet í™œìš©**: DBëŠ” ì ˆëŒ€ Publicì— ë‘ì§€ ì•Šê¸°
4. **IAM Role ì‚¬ìš©**: í•˜ë“œì½”ë”©ëœ Access Key ëŒ€ì‹  Role ì‚¬ìš©

---

## 6. ì‹¤ì „ ë°°í¬ ì‹œë‚˜ë¦¬ì˜¤

### 6.1 ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ (NestJS + PostgreSQL)

**ìš”êµ¬ì‚¬í•­:**
- Frontend: Vercel (HTTPS ìë™ ì§€ì›)
- Backend: NestJS API
- Database: PostgreSQL
- ì˜ˆì‚°: ìµœì†Œí™”

**ì•„í‚¤í…ì²˜ ì„ íƒì§€:**

#### ì˜µì…˜ 1: AWS ECS + RDS (í”„ë¡œë•ì…˜ê¸‰)

```
[Vercel Frontend (HTTPS)]
          â†“
[Route53 + ACM Certificate]
          â†“
[ALB (Public Subnet)]
          â†“
[ECS Fargate (Private Subnet)]
          â†“
[RDS PostgreSQL (Private Subnet)]
```

**ì¥ì :**
- ì™„ì „ ê´€ë¦¬í˜•, ìë™ ìŠ¤ì¼€ì¼ë§
- ê³ ê°€ìš©ì„± (Multi-AZ)
- í”„ë¡œë•ì…˜ ìˆ˜ì¤€ ë³´ì•ˆ

**ë‹¨ì :**
- ë¹„ìš© ë†’ìŒ ($100+/ì›”)
- ì„¤ì • ë³µì¡

#### ì˜µì…˜ 2: AWS Lightsail (ì¶”ì²œ - ë¹„ìš© íš¨ìœ¨)

```
[Vercel Frontend (HTTPS)]
          â†“
[Cloudflare (ë¬´ë£Œ SSL)]
          â†“
[Lightsail Instance $5/ì›”]
          â†“
[Lightsail Database $15/ì›”]
```

**ì¥ì :**
- ë¹„ìš© ì €ë ´ ($20/ì›”)
- ê°„ë‹¨í•œ ì„¤ì •
- VPC ë¶ˆí•„ìš”

**ë‹¨ì :**
- ìˆ˜ë™ ìŠ¤ì¼€ì¼ë§
- ë‹¨ì¼ ì¸ìŠ¤í„´ìŠ¤ (ì¥ì•  ì‹œ ë‹¤ìš´)

#### ì˜µì…˜ 3: PaaS (Railway, Render)

```
[Vercel Frontend (HTTPS)]
          â†“
[Railway Backend + DB]
```

**ì¥ì :**
- ê°€ì¥ ê°„ë‹¨í•¨
- Git pushë¡œ ìë™ ë°°í¬
- SSL ìë™ ì„¤ì •

**ë‹¨ì :**
- ë¹„ìš© ì˜ˆì¸¡ ì–´ë ¤ì›€ (ì‚¬ìš©ëŸ‰ ê¸°ë°˜)
- ì»¤ìŠ¤í„°ë§ˆì´ì§• ì œí•œ

### 6.2 SSL ì¸ì¦ì„œ ì„¤ì •

**ë¬¸ì œ:**
- FrontendëŠ” Vercelì´ HTTPS ì œê³µ
- Backendê°€ HTTPë©´ "Mixed Content" ë¸Œë¼ìš°ì € ì—ëŸ¬ ë°œìƒ

**í•´ê²°ì±…:**

#### ë°©ë²• 1: Let's Encrypt (ë¬´ë£Œ, ì§ì ‘ ê´€ë¦¬)

```bash
# EC2/Lightsailì—ì„œ ì‹¤í–‰
sudo apt update
sudo apt install certbot python3-certbot-nginx -y

# ì¸ì¦ì„œ ë°œê¸‰ ë° Nginx ìë™ ì„¤ì •
sudo certbot --nginx -d api.yourdomain.com

# ìë™ ê°±ì‹  ì„¤ì • (90ì¼ë§ˆë‹¤)
sudo systemctl enable certbot.timer
```

**Nginx ì„¤ì •:**
```nginx
server {
    listen 80;
    server_name api.yourdomain.com;

    # HTTP â†’ HTTPS ë¦¬ë‹¤ì´ë ‰íŠ¸
    return 301 https://$host$request_uri;
}

server {
    listen 443 ssl;
    server_name api.yourdomain.com;

    # Let's Encrypt ì¸ì¦ì„œ
    ssl_certificate /etc/letsencrypt/live/api.yourdomain.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/api.yourdomain.com/privkey.pem;

    location / {
        proxy_pass http://localhost:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

#### ë°©ë²• 2: Cloudflare (ë¬´ë£Œ, ì¶”ì²œ!)

**ì„¤ì • ìˆœì„œ:**
1. ë„ë©”ì¸ êµ¬ë§¤ (Namecheap, GoDaddy ë“±: $8/ë…„)
2. Cloudflare ê³„ì • ìƒì„± (ë¬´ë£Œ)
3. ë„ë©”ì¸ Nameserverë¥¼ Cloudflareë¡œ ë³€ê²½
4. Cloudflare DNSì— A ë ˆì½”ë“œ ì¶”ê°€
5. SSL/TLS ëª¨ë“œ: "Flexible" ë˜ëŠ” "Full"

**ì¥ì :**
- ë°±ì—”ë“œëŠ” HTTPì—¬ë„ ë¨ (Cloudflareê°€ HTTPS ì²˜ë¦¬)
- CDN ê¸°ëŠ¥ í¬í•¨ (ì†ë„ í–¥ìƒ)
- DDoS ë°©ì–´ ìë™
- ë¬´ë£Œ!

**ì„¤ì • ì˜ˆì‹œ:**
```
DNS Records:
api.yourdomain.com  â†’  A  â†’  [Lightsail IP]  (Proxy ON)

SSL/TLS: Flexible
â†’ ì‚¬ìš©ì â†” Cloudflare: HTTPS
â†’ Cloudflare â†” Backend: HTTP
```

### 6.3 CORS ì„¤ì •

**NestJS CORS ì„¤ì •:**
```typescript
// main.ts
async function bootstrap() {
  const app = await NestFactory.create(AppModule);

  app.enableCors({
    origin: [
      'https://yourdomain.com',
      'https://www.yourdomain.com',
      'http://localhost:3000',  // ê°œë°œìš©
    ],
    credentials: true,
  });

  await app.listen(3000);
}
```

---

## 7. ë¹„ìš© ìµœì í™” ì „ëµ

### 7.1 ì†Œê·œëª¨ í”„ë¡œì íŠ¸ (<1000 ì‚¬ìš©ì)

**ì¶”ì²œ êµ¬ì„±:**
```
Frontend: Vercel (ë¬´ë£Œ)
Backend: Lightsail $5/ì›”
Database: Lightsail Database $15/ì›”
Domain: Namecheap $8/ë…„
SSL: Cloudflare (ë¬´ë£Œ)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ì´ ë¹„ìš©: $20.67/ì›”
```

### 7.2 ì¤‘ê·œëª¨ í”„ë¡œì íŠ¸ (1000-10000 ì‚¬ìš©ì)

**ì¶”ì²œ êµ¬ì„±:**
```
Frontend: Vercel Pro ($20/ì›”)
Backend: ECS Fargate (2 Tasks) (~$30/ì›”)
Database: RDS t4g.small (~$50/ì›”)
ALB (~$20/ì›”)
NAT Gateway (~$35/ì›”)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ì´ ë¹„ìš©: $155/ì›”
```

### 7.3 ë¹„ìš© ì ˆê° íŒ

**NAT Gateway ë¹„ìš© ì¤„ì´ê¸°:**
- NAT GatewayëŠ” ì‹œê°„ë‹¹ $0.045 + ë°ì´í„° ì „ì†¡ë£Œ
- Private Subnetì´ ì™¸ë¶€ API í˜¸ì¶œ ì•ˆ í•˜ë©´ ë¶ˆí•„ìš”
- VPC Endpointë¡œ AWS ì„œë¹„ìŠ¤ ì ‘ê·¼ (S3, DynamoDB)

**ë°ì´í„°ë² ì´ìŠ¤ ë¹„ìš© ì¤„ì´ê¸°:**
- ê°œë°œ ì´ˆê¸°: Railway/Supabase ë¬´ë£Œ í‹°ì–´
- íŠ¸ë˜í”½ ì¦ê°€: Lightsail Database ($15/ì›”)
- í”„ë¡œë•ì…˜: RDS ($30/ì›”~)

**íŠ¸ë˜í”½ ë¹„ìš© ì¤„ì´ê¸°:**
- CloudFront/Cloudflare CDN ì‚¬ìš©
- ì´ë¯¸ì§€ ìµœì í™” (WebP, ì••ì¶•)
- ë¶ˆí•„ìš”í•œ API í˜¸ì¶œ ì¤„ì´ê¸°

---

## 8. í•µì‹¬ ì •ë¦¬

### 8.1 ë°˜ë“œì‹œ ê¸°ì–µí•  ê°œë…

**1. VPCëŠ” ë…¼ë¦¬ì  ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬**
- ë¬¼ë¦¬ì ìœ¼ë¡œëŠ” AWS ì¸í”„ë¼ ê³µìœ , ë…¼ë¦¬ì ìœ¼ë¡œëŠ” ì™„ì „ ë¶„ë¦¬
- VXLAN ë“± ê°€ìƒí™” ê¸°ìˆ ë¡œ êµ¬í˜„

**2. Internet GatewayëŠ” VPCì˜ ìœ ì¼í•œ ì¸í„°ë„· ì¶œì…êµ¬**
- Public IP â†” Private IP ë³€í™˜ (NAT)
- Public Subnetì˜ í•„ìˆ˜ ìš”ì†Œ
- ì–‘ë°©í–¥ í†µì‹  ê°€ëŠ¥

**3. NAT GatewayëŠ” Private Subnetì˜ ì•„ì›ƒë°”ìš´ë“œ ì „ìš©**
- Private â†’ ì¸í„°ë„· ë‹¨ë°©í–¥ í†µì‹ 
- ì™¸ë¶€ API í˜¸ì¶œ, ì†Œí”„íŠ¸ì›¨ì–´ ì—…ë°ì´íŠ¸ ìš©ë„
- ì‚¬ìš©ìê°€ Private ì„œë¸Œë„·ì— ì ‘ê·¼í•˜ëŠ” ìš©ë„ ì•„ë‹˜!

**4. Security Groupì€ ìµœì†Œ ê¶Œí•œ ì›ì¹™**
- í•„ìš”í•œ í¬íŠ¸/IPë§Œ í—ˆìš©
- ê³„ì¸µë³„ ë¶„ë¦¬ (ALB â†’ Backend â†’ DB)
- Statefulì´ë¼ ì‘ë‹µì€ ìë™ í—ˆìš©

**5. SSL ì¸ì¦ì„œëŠ” í•„ìˆ˜**
- HTTPS Frontend + HTTP Backend = Mixed Content ì—ëŸ¬
- Let's Encrypt (ë¬´ë£Œ, ìˆ˜ë™) vs Cloudflare (ë¬´ë£Œ, ìë™)

### 8.2 ìì£¼ í•˜ëŠ” ì‹¤ìˆ˜

**âŒ RDSë¥¼ Public Subnetì— ë°°ì¹˜**
- ë³´ì•ˆ ìœ„í—˜, ì ˆëŒ€ ê¸ˆì§€
- í•­ìƒ Private Subnetì— ë°°ì¹˜

**âŒ ëª¨ë“  ì„œë¸Œë„·ì„ Publicìœ¼ë¡œ ì„¤ì •**
- ë³´ì•ˆ ì·¨ì•½, NAT Gateway ë¹„ìš© ë‚­ë¹„
- ì—­í• ì— ë”°ë¼ Public/Private ë¶„ë¦¬

**âŒ Security Groupì— 0.0.0.0/0 ë‚¨ë°œ**
- í•„ìš”í•œ ê²½ìš°ë§Œ (ALBì˜ 80/443 í¬íŠ¸)
- ë‚˜ë¨¸ì§€ëŠ” íŠ¹ì • ë³´ì•ˆ ê·¸ë£¹ë§Œ í—ˆìš©

**âŒ Dockerì— ë°ì´í„°ë² ì´ìŠ¤ ë°°í¬**
- ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘ ì‹œ ë°ì´í„° ì†ì‹¤ ìœ„í—˜
- í•­ìƒ ê´€ë¦¬í˜• DB ì‚¬ìš© (RDS, Lightsail DB)

### 8.3 í†µì‹  íë¦„ ì´ì •ë¦¬

**ì‚¬ìš©ì â†’ Public Subnet EC2:**
```
[ì‚¬ìš©ì]
  â†’ [IGW: NAT ë³€í™˜]
    â†’ [Public EC2]
```

**Public EC2 â†’ ì™¸ë¶€ API:**
```
[Public EC2]
  â†’ [IGW: NAT ë³€í™˜]
    â†’ [ì™¸ë¶€ API]
```

**ì‚¬ìš©ì â†’ Private Subnet EC2:**
```
[ì‚¬ìš©ì]
  â†’ [IGW]
    â†’ [ALB in Public Subnet]
      â†’ [Private EC2]
```

**Private EC2 â†’ ì™¸ë¶€ API:**
```
[Private EC2]
  â†’ [NAT Gateway in Public Subnet]
    â†’ [IGW]
      â†’ [ì™¸ë¶€ API]
```

**Private EC2 â†’ RDS:**
```
[Private EC2]
  â†’ [VPC Local ë¼ìš°íŒ…]
    â†’ [RDS in Private Subnet]
(ì¸í„°ë„· ê±°ì¹˜ì§€ ì•ŠìŒ!)
```

---

## 9. ë‹¤ìŒ ë‹¨ê³„

### 9.1 ì‹¤ìŠµí•´ë³´ê¸°

**1ë‹¨ê³„: Default VPC íƒìƒ‰**
```bash
aws ec2 describe-vpcs
aws ec2 describe-subnets
aws ec2 describe-route-tables
```

**2ë‹¨ê³„: ê°„ë‹¨í•œ ì›¹ì„œë²„ ë°°í¬**
- EC2 t2.micro (í”„ë¦¬í‹°ì–´)
- Security Group ì„¤ì • (80, 443 í¬íŠ¸)
- Nginx ì„¤ì¹˜ ë° í…ŒìŠ¤íŠ¸

**3ë‹¨ê³„: Private Subnet + NAT Gateway**
- Custom VPC ìƒì„± (10.0.0.0/16)
- Public Subnet (10.0.1.0/24)
- Private Subnet (10.0.2.0/24)
- NAT Gateway ìƒì„± ë° í…ŒìŠ¤íŠ¸

### 9.2 ì‹¬í™” í•™ìŠµ ì£¼ì œ

- **VPC Peering**: ì—¬ëŸ¬ VPC ì—°ê²°
- **VPC Endpoint**: NAT Gateway ì—†ì´ AWS ì„œë¹„ìŠ¤ ì ‘ê·¼
- **Transit Gateway**: ë³µì¡í•œ ë„¤íŠ¸ì›Œí¬ ê´€ë¦¬
- **Direct Connect**: ì˜¨í”„ë ˆë¯¸ìŠ¤-AWS ì „ìš©ì„ 
- **CloudFormation**: ì¸í”„ë¼ë¥¼ ì½”ë“œë¡œ ê´€ë¦¬ (IaC)

### 9.3 ì°¸ê³  ìë£Œ

- AWS VPC ê³µì‹ ë¬¸ì„œ: https://docs.aws.amazon.com/vpc/
- AWS Well-Architected Framework
- VPC Flow Logsë¡œ ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ ë¶„ì„
- AWS Cost Explorerë¡œ ë¹„ìš© ëª¨ë‹ˆí„°ë§

---

## 10. í•™ìŠµ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] IP ì£¼ì†Œì™€ CIDR í‘œê¸°ë²• ì´í•´
- [ ] NATì˜ ê°œë…ê³¼ ì—­í•  ì„¤ëª… ê°€ëŠ¥
- [ ] VPCê°€ ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬ë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ì‹ ì´í•´
- [ ] Internet Gateway vs NAT Gateway ì°¨ì´ ëª…í™•íˆ êµ¬ë¶„
- [ ] Public Subnetê³¼ Private Subnetì˜ ì°¨ì´ ì„¤ëª… ê°€ëŠ¥
- [ ] Security Group vs NACL ë¹„êµ ê°€ëŠ¥
- [ ] 3-Tier ì•„í‚¤í…ì²˜ ì„¤ê³„ ê°€ëŠ¥
- [ ] SSL ì¸ì¦ì„œ ì„¤ì • ë°©ë²• 2ê°€ì§€ ì´ìƒ ì•Œê¸°
- [ ] ë¹„ìš© íš¨ìœ¨ì ì¸ ë°°í¬ ì „ëµ ìˆ˜ë¦½ ê°€ëŠ¥
- [ ] ì‹¤ì œ í”„ë¡œì íŠ¸ì— VPC ì„¤ê³„ ì ìš© ê°€ëŠ¥

---

> **ìµœì¢… ì •ë¦¬:**
> AWS VPCëŠ” "í´ë¼ìš°ë“œì— ë‚˜ë§Œì˜ ì‚¬ì„¤ ë„¤íŠ¸ì›Œí¬ë¥¼ ë§Œë“œëŠ” ê²ƒ"ì…ë‹ˆë‹¤.
> Internet GatewayëŠ” VPCì˜ "ëŒ€ë¬¸", NAT GatewayëŠ” Private ì„œë¸Œë„·ì˜ "ë’·ë¬¸"ì…ë‹ˆë‹¤.
> ë³´ì•ˆì€ ê³„ì¸µë³„ë¡œ ë‚˜ëˆ„ê³ , ë¹„ìš©ì€ í•„ìš”í•œ ë§Œí¼ë§Œ ì‚¬ìš©í•˜ì„¸ìš”!

ğŸ“… í•™ìŠµì¼: 2026-01-13
âœï¸ ì‘ì„±ì: Claude + í•™ìŠµì
ğŸ”„ ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2026-01-13
